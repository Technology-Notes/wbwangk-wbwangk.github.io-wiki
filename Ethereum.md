## éƒ¨ç½²å¤šèŠ‚ç‚¹ä»¥å¤ªåŠç§æœ‰é“¾
gethæ˜¯ä»¥å¤ªåŠçš„goè¯­è¨€å®ç°çš„å®¢æˆ·ç«¯ã€‚å¦ä¸€ä¸ªå¸¸ç”¨çš„æ˜¯parityã€‚

### å®‰è£…è¿‡ç¨‹
å®‰è£…ç¯å¢ƒæ˜¯windows10ä¸‹çš„ä¸‰ä¸ªubuntuè™šæ‹Ÿæœºï¼š
```
u1601  192.168.16.101
u1602  192.168.16.102
u1603  192.168.16.103
```
u1601å……å½“è¿‘ä¼¼äºç§å­èŠ‚ç‚¹çš„ä½œç”¨ï¼Œå…ˆå¯åŠ¨ã€‚å¦ä¸¤ä¸ªèŠ‚ç‚¹å¯åŠ¨æ—¶ä¸»åŠ¨è¿æ¥åˆ°u1602ã€‚

ä¸‰ä¸ªVMä½¿ç”¨çš„ç”¨æˆ·æ˜¯vagrantï¼Œéƒ½åˆ›å»ºäº†`~/geth`ç›®å½•ï¼Œå¹¶å°†æ•°æ®ç›®å½•æ”¾åœ¨`~/geth/chain1`ã€‚

ä¸‰ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦å®‰è£…gethï¼Œéƒ½è¦æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ ([å‚è€ƒ](https://github.com/ethereum/go-ethereum/wiki/Installation-Instructions-for-Ubuntu))ï¼š
```
sudo apt-get install software-properties-common
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo apt-get update
sudo apt-get install geth
```
ï¼ˆç”¨å…¬å¸çš„ç½‘ç»œapt-get updateæŠ¥é”™ï¼Œç”¨æ‰‹æœºä¸Šç½‘æ‰è¡Œï¼‰  

### å¯åŠ¨u1601èŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹1ï¼‰

#### åˆ›å»ºä¸€ä¸ªä»¥å¤ªåŠè´¦å·
é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªä»¥å¤ªåŠè´¦å·ï¼Œå……å½“èŠ‚ç‚¹1çš„é»˜è®¤è´¦å·ã€‚è¿™ä¸ªé»˜è®¤è´¦å·å³æ˜¯èŠ‚ç‚¹1æŒ–çŸ¿æ”¶ç›Šçš„å­˜å…¥è´¦å·ï¼Œä¹Ÿæ˜¯å®ƒè¿è¡Œäº¤æ˜“çš„ä»˜è´¹è´¦å·ã€‚
```
$ cd ~/geth
$ geth --datadir ~/geth/chain1 account new
Your new account is locked with a password. Please give a password. Do not forget this password.
Passphrase: 1
Repeat passphrase: 1
Address: {67352ce02631da33a3f4112685b521217283d482}
```
åˆ›å»ºè´¦å·æ˜¯ä¸éœ€è¦ä»¥å¤ªåŠç½‘ç»œã€‚åœ¨åˆ›ä¸–åŒºå—ä¸­ç»™è¿™ä¸ªè´¦å·é¢„åˆ†é…ä¸€äº›ä½™é¢ã€‚

#### åŒºå—é“¾åˆå§‹åŒ–
å…ˆåˆ›å»ºåˆ›ä¸–åŒºå—é…ç½®æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œåˆå§‹åŒ–ã€‚ 

åœ¨åˆ›å»ºä¸€ä¸ªåˆ›ä¸–åŒºå—é…ç½®æ–‡ä»¶ï¼ˆ`~/geth/CustomGenesis.json`ï¼‰:
```json
{
    "config": {
        "chainId": 322,
        "homesteadBlock": 0,
        "eip155Block": 0,
        "eip158Block": 0
    },
    "nonce": "0x0000000000000043",     "timestamp": "0x0",
    "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "extraData": "0x01",     "gasLimit": "0x8000001",     "difficulty": "0x401",
    "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
    "coinbase": "0x3333333333333333333333333333333333333332",
    "alloc": {
       "67352ce02631da33a3f4112685b521217283d482": {
         "balance": "100000000000" }
    }
}
```
DAOäº‹ä»¶åä»¥å¤ªåŠç¡¬åˆ†å‰ä¸ºETHå’ŒETCã€‚ä¸¤è€…çš„ç½‘ç»œidéƒ½æ˜¯1ï¼Œä¸ºäº†åŒºåˆ†åªå¥½å¼•å…¥äº†chainIdã€‚ETHçš„ä¸»ç½‘chainIdæ˜¯1ï¼ŒETCæ˜¯62ã€‚ç§æœ‰é“¾è¦ä¸ä¸»é“¾åŒºåˆ†å¼€æ¥ï¼Œnetworkidå’Œchainidéƒ½è®¾ç½®å¾—ä¸ªæ€§ä¸€äº›ï¼Œè¿™é‡Œæ˜¯322ã€‚

ç”¨`alloc`å±æ€§ä¸ºæ–°å»ºäº†è´¦å·åˆ†é…äº†ä¸€äº›ETHã€‚

å¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹åˆå§‹åŒ–ä¹Ÿéœ€è¦è¿™ä¸ªåˆ›ä¸–åŒºå—é…ç½®æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°å¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹ï¼š
```
$ scp CustomGenesis.json vagrant@u1602:~/geth
$ scp CustomGenesis.json vagrant@u1603:~/geth
```

#### åˆå§‹åŒ–
```
$ geth --datadir ~/geth/chain1 init ~/geth/CustomGenesis.json
```
#### å¯åŠ¨èŠ‚ç‚¹1
```
$ geth --identity "u1601" --rpc --rpccorsdomain "*" --datadir "~/geth/chain1" --port "30303" --rpcapi "db,eth,net,web3" --networkid 85105780 console
> admin.nodeInfo.enode
"enode://f6f8a89474e43dc082e738786f73bb8f41b5a194465d6795dd5452389b81e09f1883a308ba72224cf463a4dd639262cf9d02c0aec426e10c7f28cdce52595eb4@[::]:30303"
```
é€šè¿‡`admin.nodeInfo.enode`è·å–èŠ‚ç‚¹idï¼ˆenodeï¼‰ï¼Œè¿™ä¸ªenodeåœ¨å¯åŠ¨å¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹æ—¶ä¼šç”¨åˆ°ã€‚

å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹ä¸€ä¸‹å½“å‰çš„peeræ•°é‡ï¼š
```
> net.peerCount
0
```
æ²¡æœ‰ä»»ä½•peerè¿æ¥åˆ°å½“å‰èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ˜¾ç¤ºæ•°é‡æ˜¯0

### å¯åŠ¨å¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹

#### å¯åŠ¨u1602ï¼ˆèŠ‚ç‚¹2ï¼‰
åœ¨å¦å¤–çš„ç»ˆç«¯çª—å£ä¸­sshåˆ°u1602è™šæ‹Ÿæœºï¼š
```
$ geth --datadir ~/geth/chain1 init ~/geth/CustomGenesis.json
$ geth --identity "u1602" --rpc --rpccorsdomain "*" --datadir "~/geth/chain1" --port "30303" --rpcapi "db,eth,net,web3" --networkid 85105780 --bootnodes "enode://f6f8a89474e43dc082e738786f73bb8f41b5a194465d6795dd5452389b81e09f1883a308ba72224cf463a4dd639262cf9d02c0aec426e10c7f28cdce52595eb4@192.168.16.101:30303"
```
å›åˆ°èŠ‚ç‚¹1ï¼ˆu1601ï¼‰å¯ä»¥æŸ¥çœ‹peeræ•°é‡å’Œpeerä¿¡æ¯ï¼š
```
> net.peerCount
1
```
å¯ä»¥çœ‹åˆ°peeræ•°é‡ä¸å†æ˜¯0ï¼Œè¯´æ˜ä¸¤ä¸ªä»¥å¤ªåŠpeerå·²ç»äº’ç›¸æ‰¾åˆ°äº†ã€‚

#### å¯åŠ¨u1603ï¼ˆèŠ‚ç‚¹3ï¼‰
åœ¨å¦å¤–çš„ç»ˆç«¯çª—å£ä¸­sshåˆ°u1603è™šæ‹Ÿæœºï¼š
```
$ geth --datadir ~/geth/chain1 init ~/geth/CustomGenesis.json
$ geth --identity "u1603" --rpc --rpccorsdomain "*" --datadir "~/geth/chain1" --port "30303" --rpcapi "db,eth,net,web3" --networkid 85105780 --bootnodes "enode://f6f8a89474e43dc082e738786f73bb8f41b5a194465d6795dd5452389b81e09f1883a308ba72224cf463a4dd639262cf9d02c0aec426e10c7f28cdce52595eb4@192.168.16.101:30303"
```
å›åˆ°èŠ‚ç‚¹1ï¼ˆu1601ï¼‰å¯ä»¥æŸ¥çœ‹peeræ•°é‡å’Œpeeræ¸…å•ï¼š
```
> net.peerCount
2
> admin.peers
[{
    caps: ["eth/63"],
    id: "0e2ffa09f3ba3b5b72d2756ffe0acb96d1b4e19f4ef77bcce92eba825440bef304b88a3d3b207d0ddab1c7d138c02cb7a7dd0c5cbb98a2722f1b23327a991ccf",
    name: "Geth/u1602/v1.8.2-stable-b8b9f7f4/linux-amd64/go1.9.4",
    network: {
      inbound: true,
      localAddress: "192.168.16.101:30303",
      remoteAddress: "192.168.16.102:58530",
      static: false,
      trusted: false
    },
    protocols: {
      eth: {
        difficulty: 1025,
        head: "0x838cda0e9ed6a103ec86a1de64f7bebffcfadf645f4b63114ce37461bc5fc2d0",
        version: 63
      }
    }
}, {
    caps: ["eth/63"],
    id: "9377c9cd5501934d875d64b0da59b3e74b44b86f401e771732709f5f92e4ddd3fe41d0a12ba096bb211d3cbe9a480ba146c073f63de5f5e34d4f3fd28b6483d0",
    name: "Geth/u1603/v1.8.2-stable-b8b9f7f4/linux-amd64/go1.9.4",
    network: {
      inbound: true,
      localAddress: "192.168.16.101:30303",
      remoteAddress: "192.168.16.103:43064",
      static: false,
      trusted: false
    },
    protocols: {
      eth: {
        difficulty: 1025,
        head: "0x838cda0e9ed6a103ec86a1de64f7bebffcfadf645f4b63114ce37461bc5fc2d0",
        version: 63
      }
    }
}]
```

### æµ‹è¯•
æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯çª—å£ï¼Œsshåˆ°u1602ã€‚åœ¨u1602ä¸Šæ–°å»ºä¸€ä¸ªè´¦å·ï¼š
```
$ geth --datadir ~/geth/chain1 account new
Passphrase: 1
Repeat passphrase: 1
Address: {862ddc87ba62b4644fd02aba13e390237b4e028d}
```
è¿›å…¥èŠ‚ç‚¹2çš„æ§åˆ¶å°ï¼š
```
$ geth --datadir ~/geth/chain1 attach
Welcome to the Geth JavaScript console!

instance: Geth/u1602/v1.8.2-stable-b8b9f7f4/linux-amd64/go1.9.4
coinbase: 0x862ddc87ba62b4644fd02aba13e390237b4e028d
at block: 0 (Thu, 01 Jan 1970 00:00:00 UTC)
 datadir: /home/vagrant/geth/chain1
 modules: admin:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0

> eth.accounts
["0x862ddc87ba62b4644fd02aba13e390237b4e028d"]
> eth.getBalance("0x862ddc87ba62b4644fd02aba13e390237b4e028d")
0
> eth.getBalance("67352ce02631da33a3f4112685b521217283d482")
100000000000
```
`geth attach`å‘½ä»¤ä¼šç”¨IPCä¸gethè¿›ç¨‹é€šä¿¡ï¼Œç„¶åæ‰“å¼€ä¸€ä¸ªGeth JavaScriptæ§åˆ¶å°ã€‚`geth attach`æ—¶è¿˜æ˜¾ç¤ºäº†coinbaseåœ°å€ï¼Œè¿™å°±æ˜¯æŒ–çŸ¿æ”¶ç›Šçš„ä¿å­˜è´¦æˆ·åœ°å€ã€‚  

åœ¨èŠ‚ç‚¹2ä¸Šæ–°å»ºçš„è¿™ä¸ªè´¦æˆ·ï¼ˆåœ°å€æ˜¯`0x862ddc87ba62b4644fd02aba13e390237b4e028d`ï¼‰çš„ETHä½™é¢æ˜¯0ã€‚è€Œåœ¨åˆ›ä¸–åŒºå—ä¸­åˆ†é…äº†ä½™é¢çš„é‚£ä¸ªè´¦å·ï¼ˆåœ°å€`67352ce02631da33a3f4112685b521217283d482`ï¼‰çš„ä½™é¢æ˜¯`100000000000`ã€‚

ï¼ˆä½ è¿˜å¯ä»¥åœ¨getBalanceæ—¶æ•…æ„è¾“å…¥é”™è¯¯çš„åœ°å€ï¼Œä¼šæ˜¾ç¤ºError: invalid addressï¼‰

#### æŒ–çŸ¿
åœ¨u1601ä¸Šå¯åŠ¨æŒ–çŸ¿ï¼š
```
> eth.blockNumber
0
> eth.accounts
["0xb7c3a15402706b7bbecbf9c4895d434f9836e13b"]
> eth.getBalance("0xb7c3a15402706b7bbecbf9c4895d434f9836e13b")
0
> miner.start()
true
...
INFO [03-15|00:59:52] Successfully sealed new block            number=8 hash=1dc639â€¦ddbc0d
INFO [03-15|00:59:52] ğŸ”— block reached canonical chain          number=3 hash=e48dbdâ€¦351f31
INFO [03-15|00:59:52] ğŸ”¨ mined potential block                  number=8 hash=1dc639â€¦ddbc0d
INFO [03-15|00:59:52] Commit new mining work                   number=9 txs=0 uncles=0 elapsed=244.944Âµs
...
> miner.stop()
true
> eth.blockNumber
79
> eth.getBalance("0xb7c3a15402706b7bbecbf9c4895d434f9836e13b")
70000000000000000000
```

#### è½¬è´¦äº¤æ˜“
```
> personal.unlockAccount("0xb7c3a15402706b7bbecbf9c4895d434f9836e13b", "1")
true
> eth.sendTransaction({from: "0xb7c3a15402706b7bbecbf9c4895d434f9836e13b", to: "0x862ddc87ba62b4644fd02aba13e390237b4e028d", value: web3.toWei(1, "ether")})
INFO [03-15|01:26:52] Submitted transaction                    fullhash=0x20f2705d5701cb08a714689f3aec02fad90afa7f258aacf211b6498318a83e96 recipient=0x862Ddc87bA62b4644Fd02AbA13E390237b4e028d
"0x20f2705d5701cb08a714689f3aec02fad90afa7f258aacf211b6498318a83e96"
> eth.getBalance("0x862ddc87ba62b4644fd02aba13e390237b4e028d")
```
è½¬è´¦å‰è¦è§£é”è´¦æˆ·ï¼Œå¯ä»¥ç†è§£ä¸ºå¯†ç æ¢ç§é’¥ã€‚unlockAccountçš„å‚æ•°`1`æ˜¯å¯†ç ã€‚
äº¤æ˜“é€šè¿‡æŒ–çŸ¿æ‰èƒ½æ‰“åŒ…åˆ°åŒºå—ï¼Œè€Œä»ç¡®è®¤äº¤æ˜“ã€‚æ‰€ä»¥å¦‚æœåªæ˜¯å‘ä¸Šé¢è¿™æ ·å‘å‡ºäº¤æ˜“ï¼Œè´¦æˆ·ä½™é¢æ˜¯ä¸ä¼šå˜çš„ã€‚éœ€è¦å¯åŠ¨æŒ–çŸ¿ï¼ˆä¸å°å¿ƒåœ¨u1602ä¸Šæ‰§è¡Œçš„ä¸‹åˆ—æŒ–çŸ¿æ“ä½œï¼‰ï¼š
```
> miner.start()
true
...
>miner.stop()
true
> eth.getBalance("0x862ddc87ba62b4644fd02aba13e390237b4e028d")
457000756000000000000
```
ä¸Šé¢çš„æ•°å­—ä¹‹æ‰€ä»¥è¿™ä¹ˆå¤§ï¼Œæ˜¯å› ä¸ºä¸å°å¿ƒå¯åŠ¨äº†u1602çš„æŒ–çŸ¿ï¼Œè¿™ä¸ªè´¦æˆ·æ˜¯u1602çš„coinbaseè´¦æˆ·ï¼Œé‡Œé¢æœ‰æŒ–çŸ¿å¾—åˆ°çš„æ”¶ç›Šã€‚





## å‘è¡Œè‡ªå·±çš„ä»¥å¤ªåŠERC20 Token
[åŸæ–‡](http://blog.csdn.net/sinat_34070003/article/details/79107181)  

### å®‰è£…ä»¥å¤ªåŠè½»é’±åŒ…MetaMask
[MetaMask](https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?authuser=2) æ˜¯ä¸€æ¬¾åœ¨è°·æ­Œæµè§ˆå™¨Chromeä¸Šä½¿ç”¨çš„æ’ä»¶ç±»å‹çš„ä»¥å¤ªåŠé’±åŒ…ï¼Œè¯¥é’±åŒ…ä¸éœ€è¦ä¸‹è½½ï¼Œåªéœ€è¦åœ¨è°·æ­Œæµè§ˆå™¨æ·»åŠ å¯¹åº”çš„æ‰©å±•ç¨‹åºå³å¯ï¼Œéå¸¸è½»é‡çº§ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸æ–¹ä¾¿ã€‚ï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™æ‰èƒ½å®‰è£…ï¼‰[1](http://8btc.com/thread-76137-1-5.html)   

å®‰è£…å¥½MetaMaskåChromeå³ä¸Šè§’ä¼šå¤šäº†ä¸€ä¸ªæ©™è‰²çš„ç‹ç‹¸å¤´å›¾æ ‡ã€‚ç‚¹å›¾æ ‡ä¼šæ‰“å¼€MetaMaskæµ®åŠ¨æ¡†ã€‚æ–°å»ºé’±åŒ…ï¼Œè¾“å…¥å¯†ç ã€‚

MetaMaskä¼šä¸ºç”¨æˆ·åˆ›å»º12ä¸ªè‹±æ–‡åŠ©è®°è¯ï¼Œä¸€å®šè¦ä¿å­˜å¥½è¿™äº›åŠ©è®°è¯ï¼Œä¸€å®šè¦ä¿å­˜å¥½è¿™äº›åŠ©è®°è¯ï¼Œä¸€å®šè¦ä¿å­˜å¥½è¿™äº›åŠ©è®°è¯ã€‚åœ¨å…¶ä»–é’±åŒ…å¯¼å…¥è¿™ä¸ªæ–°åˆ›å»ºçš„è´¦æˆ·çš„æ—¶å€™éœ€è¦è¾“å…¥è¿™äº›åŠ©è®°è¯ã€‚

åœ¨ä»¥å¤ªåŠçš„ä¸»ç½‘ç»œä¸Šå‘å¸ƒæ™ºèƒ½åˆçº¦éœ€è¦ä»¥å¤ªå¸(ETH)ï¼Œè€Œä½¿ç”¨æµ‹è¯•ç½‘ç»œå¯ä»¥ç›´æ¥ç”³è¯·åˆ°æµ‹è¯•ç”¨çš„ä»¥å¤ªå¸ã€‚åœ¨MetaMaskæµ®åŠ¨æ¡†çš„å·¦ä¸Šè§’çš„ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©`Ropsten Test Network`é€‰é¡¹ï¼Œæ¥åˆ‡æ¢åˆ°æµ‹è¯•ç½‘ã€‚è¿™ä¸ªæµ‹è¯•ç½‘è²Œä¼¼ç”±`infura.io`æä¾›ã€‚

ç‚¹å‡»â€œBUYâ€æŒ‰é’®ï¼Œç„¶åç‚¹â€œROPSTEN TEST FAUCETâ€ã€‚ç‚¹å‡»ç»¿è‰²çš„æŒ‰é’®â€œrequest 1 ether from faucetâ€ï¼Œå°±å¯ä»¥é¢†å–1ETHã€‚æµ‹è¯•çš„è¯ä¸€ä¸ªä»¥å¤ªå¸å¤Ÿç”¨äº†ï¼Œå¦‚æœå†æƒ³å¤šé¢†ç‚¹ï¼Œå°±ç‚¹[è¿™ä¸ªç½‘å€](http://faucet.ropsten.be:3001) å†é¢†3ä¸ªä»¥å¤ªå¸(ETH)ã€‚å€’æ˜¯å¯ä»¥ç†Ÿæ‚‰ä¸€ä¸‹ä»¥å¤ªå¸åœ°å€çš„æ¦‚å¿µã€‚

MetaMaskæµ®åŠ¨æ¡†ä¸Šè´¦æˆ·çš„åœ°å€æ˜¾ç¤ºä¸å…¨ï¼Œå¯ä»¥ç‚¹è´¦æˆ·å‚è¾¹çš„ä¸‰ä¸ªé»‘ç‚¹è°ƒå‡ºä¸€ä¸ªä¸‹æ‹‰æ¡†é€‰æ‹©å°†è´¦æˆ·åœ°å€å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ã€‚å¦‚æœæˆ‘åˆšæ–°å»ºçš„è´¦æˆ·åœ°å€æ˜¯ï¼š
```
0x313117B29B6980603525e2de87145315879c17Eb
```
æ‰€æœ‰çš„åŠ å¯†è´§å¸éƒ½ä¼šæœ‰ç±»ä¼¼çš„åœ°å€ï¼Œè¿™ä»£è¡¨äº†ç”¨æˆ·çš„è´¦æˆ·ï¼Œè´¦æˆ·å¾€å¾€å¹¶ä½™é¢ã€‚æ¯”ç‰¹å¸çš„åœ°å€æ˜¯ç”¨æˆ·å…¬é’¥çš„å“ˆå¸Œï¼Œä»¥å¤ªå¸åº”è¯¥ä¹Ÿå·®ä¸å¤šã€‚

å¦‚æœä¸¤ä¸ªé€”å¾„éƒ½é¢†äº†ï¼Œåˆ™ä½ æœ‰äº†4ä¸ªETHï¼Œè¿™å¯ä»¥åœ¨MetaMaskä¸­çœ‹åˆ°ï¼Œæœ€æ–°ç‰ˆçš„MetaMaskç”šè‡³æ˜¾ç¤ºè¿™4ä¸ªETHä»·å€¼å¤šå°‘ç¾å…ƒã€‚æˆ‘è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯ä»·å€¼2951.74ç¾å…ƒï¼Œå½“ç„¶æ˜¯è¿™æ—¶çš„çœŸæ­£çš„ä»¥å¤ªå¸çš„ä»·å€¼ã€‚

åšåˆ°è¿™é‡Œä½ å·²ç»åœ¨Ropstenä»¥å¤ªåŠæµ‹è¯•ç½‘ç»œä¸­æ‹¥æœ‰äº†4ä¸ªä»¥å¤ªå¸ï¼Œå¯ä»¥éƒ¨ç½²è‡ªå·±çš„æ™ºèƒ½åˆçº¦äº†ã€‚å¦‚æœä½ æ‹¥æœ‰çœŸæ­£çš„ä»¥å¤ªå¸ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ä»¥å¤ªåŠçš„ä¸»ç½‘ç»œä¸Šåšæµ‹è¯•ï¼Œé‚£ä¹ˆå°±æ˜¯å¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ã€‚

### å¼€å‘æ™ºèƒ½åˆçº¦

ä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦ä½¿ç”¨Solidityè¯­è¨€å¼€å‘ï¼Œè¿™ä¸ªè¯­è¨€ï¼ˆç›¸å¯¹äºæ¯”ç‰¹å¸çš„è„šæœ¬ï¼‰æ˜¯å›¾çµå®Œå¤‡çš„ã€‚ä¸ºäº†è®©æœ¬æµ‹è¯•ç®€å•ï¼Œä½¿ç”¨åœ¨çº¿çš„å¼€å‘å·¥å…·ã€‚åŸæ–‡ä½¿ç”¨çš„æ˜¯[Remix](https://ethereum.github.io/browser-solidity) ï¼Œç„¶æˆ‘è¿™é‡Œæ‰“å¼€ååªæ˜¯ä¸€ä¸ªç™½ç½‘é¡µã€‚ä»githubçš„`https://github.com/ethereum/browser-solidity`é¡¹ç›®ä¸ŠæŸ¥åˆ°äº†Remixçš„å¦ä¸€ä¸ªéƒ¨ç½²[https://remix.ethereum.org](https://remix.ethereum.org/) ï¼Œç”¨è¿™ä¸ªæ¥è°ƒè¯•æ™ºèƒ½åˆçº¦æºç ã€‚

ä¸€ä¸ªä»£å¸æ™ºèƒ½åˆçº¦çš„ä¾‹å­ä¸­[è¿™ä¸ªç½‘å€](https://ropsten.etherscan.io/address/0x655275d5ea52c62531aa43a85949c63dd858e0e0#code) å¯ä»¥çœ‹åˆ°ï¼Œå¤åˆ¶åˆ°Remixçš„å·¦ä¾§æºç åŒºå³å¯ã€‚

**Run**é€‰é¡¹å¡ä¸­çš„**Environment**è®¾ç½®ä¸º`Injected Web3`ï¼ŒCreateæŒ‰é’®å·¦è¾¹çš„è¾“å…¥æ¡†ä¸­è¾“å…¥ï¼š
```
100000000,"zhongxh's test token",8,"ZTT"
```
å«ä¹‰æ˜¯Tokençš„æ•°é‡ã€Tokençš„å…¨ç§°ã€Tokençš„ç²¾åº¦(å³Tokenæœ€å°ä¸ºå°æ•°ç‚¹åå‡ ä½)ã€Tokençš„ç¬¦å·ã€‚è¿™ä¸ªå†…å®¹åé¢ä¼šç”¨åˆ°ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦è®°ä¸‹æ¥ã€‚

éœ€è¦æ³¨æ„**Settings**é€‰é¡¹å¡ä¸­çš„Solidityç‰ˆæœ¬ï¼Œæ˜¯åœ¨ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©çš„ã€‚ä½†Remixä¸­çš„Solidityç‰ˆæœ¬å¾€å¾€ä¸åˆçº¦æ ¡éªŒæ—¶é€‰æ‹©çš„Solidityç‰ˆæœ¬ä¸åŒã€‚ä¸¤è€…è¦å®Œå…¨ç›¸åŒï¼Œéœ€è¦å›æ¥æŸ¥çœ‹è¿™ä¸ªç‰ˆæœ¬ï¼Œç¡®ä¿ä¸€è‡´ã€‚Solidityç‰ˆæœ¬ä¸ä¸€è‡´ä¼šå¯¼è‡´æ ¡éªŒä¼šå¤±è´¥ã€‚

ç‚¹å‡»CreateæŒ‰é’®åï¼ŒMetaMaskä¼šå¼¹å‡ºçš„â€œCONFIRM TRANSACTIONâ€çš„é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢æ˜¯ç”¨æ¥ç¡®è®¤å‘é€çš„ï¼Œç‚¹å‡»**SUBMIT**æäº¤ï¼Œå†ç‚¹**SENT**ã€‚

è¿™æ—¶ï¼Œåˆ›å»ºæ™ºèƒ½åˆçº¦çš„ææ¡ˆå·²ç»æäº¤åˆ°äº†ä»¥å¤ªåŠæµ‹è¯•ç½‘Ropsten(infura.io)ã€‚åœ¨MetaMaskçš„SENTé€‰é¡¹å¡ä¸­å¯ä»¥çœ‹åˆ°åˆšåˆšæäº¤çš„æ™ºèƒ½åˆçº¦ææ¡ˆï¼Œç‚¹å‡»è¿™ä¸ªææ¡ˆå°±è·³è½¬åˆ°äº†ä»¥å¤ªåŠæµè§ˆå™¨[etherscan](https://ropsten.etherscan.io/tx/0x5901912c0f23302a813c4462c3c1fee6724c767654dbb51cf9e2677ca1d1e8d3) æˆ‘åˆšåˆšåˆ›å»ºçš„äº¤æ˜“ä¸­ã€‚æ™ºèƒ½åˆçº¦çš„ææ¡ˆä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„äº¤æ˜“ï¼Œä¹Ÿä¼šè¢«æ‰“åŒ…åˆ°åŒºå—ä¸­ã€‚

è¯¥äº¤æ˜“çš„å…³é”®ä¿¡æ¯æœ‰ï¼š
```
From: 0x313117b29b6980603525e2de87145315879c17eb
To:[Contract 0x4292f38c4e1f13cf6f7a37a194e1616b365d5247 Created]  
Nonce: 1
```
Fromæ˜¯æˆ‘çš„é’±åŒ…åœ°å€ï¼ŒToæ˜¯æ™ºèƒ½åˆçº¦çš„åœ°å€(Contract Address)ã€‚ä¸‹é¢ä¼šç”¨åˆ°æ™ºèƒ½åˆçº¦åœ°å€ã€‚

è¿™é‡Œçš„Nonceæ˜¯å½“å‰è´¦æˆ·å‘å‡ºçš„äº¤æ˜“åºå·ã€‚æˆ‘è¿™é‡Œæ˜¾ç¤º1æ˜¯å› ä¸ºè¿™æ˜¯å½“å‰è´¦æˆ·çš„ç¬¬2ä¸ªäº¤æ˜“ï¼ˆè²Œä¼¼ä»¥å¤ªåŠçš„åˆçº¦åœ°å€æ˜¯è´¦æˆ·åœ°å€åŠ ä¸Šè¿™ä¸ªNonceåå“ˆå¸Œå¾—åˆ°çš„ï¼‰ã€‚

åˆçº¦åœ°å€éœ€è¦è®°å½•ä¸‹æ¥ï¼Œåé¢ä¼šç”¨åˆ°ã€‚è¿™ä¸ªé¡µé¢ä¸Šçš„ä¸‹åŠéƒ¨åˆ†ä¼šæ˜¾ç¤ºInput Dataï¼Œå¦‚ï¼š
```
(ç•¥)
7b8dad8d8542c6b7ac007dba67bc3a243497503e95a99848723dde87f496700290000000000000000000000000000000000000000000000000000000005f5e1000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000147a686f6e6778682773207465737420746f6b656e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000035a54540000000000000000000000000000000000000000000000000000000000
```
éœ€è¦ç•™æ„`...87f49670029`åé¢çš„éƒ¨åˆ†ï¼Œè¿™æ˜¯åˆçº¦å®ä¾‹åŒ–æ—¶çš„åˆå§‹åŒ–å‚æ•°ã€‚åé¢ä¹Ÿä¼šç”¨åˆ°ã€‚

### å‘å¸ƒæ™ºèƒ½åˆçº¦
åœ¨etherscanæµè§ˆå™¨çš„**MISC**ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©**Verify Contract**ï¼Œè¿›å…¥äº†åˆçº¦æ ¡éªŒé¡µé¢ã€‚å¯¹äºæ™ºèƒ½åˆçº¦æ¥è¯´ï¼Œéœ€è¦æ ¡éªŒçš„å†…å®¹ä¸€æ˜¯æºç ï¼ŒäºŒæ˜¯åˆå§‹åŒ–å‚æ•°ï¼ˆæ„é€ å‡½æ•°å‚æ•°ï¼‰ã€‚å› ä¸ºæºç å†³å®šäº†ä»£å¸(Token)çš„è¿è¡Œé€»è¾‘ï¼Œè€Œåˆå§‹åŒ–å‚æ•°ä»£è¡¨äº†åˆå§‹çŠ¶æ€ï¼ˆå¦‚ä»£å¸æ€»æ•°ï¼‰ã€‚

åœ¨etherscanä¸­æ ¡éªŒçš„åˆçº¦ä¸æ”¯æŒå¯¼å…¥(import)ï¼Œå³ä»…æ”¯æŒæŠŠåˆçº¦ä»£ç å†™åœ¨åŒä¸€ä¸ªç¨‹åºæ–‡ä»¶ä¸­ã€‚

åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥çš„å†…å®¹ï¼š
```
Contract address: 0x4292f38c4e1f13cf6f7a37a194e1616b365d5247
Contract name: HumanStandardToken
Compiler: 0.4.20-nightly.2018.1.29+commit.a668b9de
Optimization: No
```
ä¸Šè¿°ä¿¡æ¯å¯ä»¥åœ¨etherscanæµè§ˆå™¨çš„[è¿™ä¸ªé¡µé¢](https://ropsten.etherscan.io/address/0x4292f38c4e1f13cf6f7a37a194e1616b365d5247#code) æŸ¥è¯¢åˆ°ã€‚
ä¸Šè¿°é¡µé¢ä¸­è¿˜æœ‰åˆçº¦æºç å’Œåˆå§‹åŒ–å‚æ•°ã€‚å…¶ä¸­ï¼Œåˆå§‹åŒ–å‚æ•°ï¼ˆConstructor Arguments (ABI-encoded and is the last bytes of the Contract Creation Code above)ï¼‰å¦‚ä¸‹ï¼š
```
0000000000000000000000000000000000000000000000000000000005f5e1000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000147a686f6e6778682773207465737420746f6b656e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000035a54540000000000000000000000000000000000000000000000000000000000
```
ä¸Šé¢çš„å­—ç¬¦ä¸²æ˜¯`100000000,"zhongxh's test token",8,"ZTT"`çš„ABIç¼–ç ã€‚

åœ¨åˆçº¦æ ¡éªŒé¡µé¢ä¸Šéœ€è¦åˆ†åˆ«å°†åˆçº¦æºç å’Œåˆå§‹åŒ–å‚æ•°åˆ†åˆ«ç²˜è´´å¥½ï¼Œç„¶åç‚¹**Verify And Publish**æŒ‰é’®ã€‚

å¦‚æœä¸€åˆ‡æ­£å¸¸ä¼šæ˜¾ç¤ºæ ¡éªŒé€šè¿‡ã€‚

### æµ‹è¯•æ™ºèƒ½åˆçº¦
å› ä¸ºMetamaskä¸æ”¯æŒtoeknçš„å‘é€ï¼Œéœ€è¦åˆ‡æ¢åˆ°[MyEtherWallet](https://www.myetherwallet.com/) é’±åŒ…ã€‚

åœ¨**MyEtherWallet**é¡µé¢ä¸Šï¼Œç‚¹å‡»å³ä¸Šè§’çš„ä¸‹æ‹‰æ¡†æ¥åˆ‡æ¢ç½‘ç»œåˆ°`Ropsten(infura.io)`ã€‚æŠŠè¯­è¨€é€‰æ‹©ä¸ºç®€ä½“ä¸­æ–‡ã€‚ç„¶åç‚¹è¶…é“¾æ¥**å‘é€ä»¥å¤ªå¸/å‘é€ä»£å¸**ã€‚ç”¨ç§é’¥çš„æ–¹å¼å¯¼å…¥é’±åŒ…ã€‚

ç‚¹å‡»Metamaskå³ä¸Šè§’çš„â€œ...â€ï¼Œç„¶åç‚¹å‡»"Export Private Key "ï¼Œè¾“å…¥å¯†ç ï¼Œå³å¯è·å¾—ç§é’¥ã€‚å°†ç§é’¥æ‹·åˆ°MyEtherWalletï¼Œå°±å¯ä»¥è§£é”ä½ çš„é’±åŒ…äº†ã€‚

é’±åŒ…è§£é”ååœ¨å±å¹•å³ä¾§æ˜¾ç¤ºï¼š
```
è´¦æˆ·åœ°å€ï¼š
0x313117B29B6980603525e2de87145315879c17Eb
è´¦æˆ·ä½™é¢ï¼š
3.986141362 ROPSTEN ETH
```
è¿™åªæ˜¯ä½ è´¦æˆ·ä¸Šçš„ä»¥å¤ªå¸ä½™é¢ï¼Œè€Œä¸æ˜¯ä½ è¦å‘è¡Œçš„ZTTä»£å¸çš„ä½™é¢ã€‚

ç‚¹å‡»å³ä¸‹è§’çš„**Add Custom Token**æŒ‰é’®ï¼Œè°ƒå‡ºä¸‰ä¸ªè¾“å…¥æ¡†ï¼Œè¾“å…¥ï¼š
```
åœ°å€ Token Contract: 0x4292f38c4e1f13cf6f7a37a194e1616b365d5247
ä»£å¸ç¬¦å·: ZTT
å°æ•°ç‚¹ä½æ•°: 8
```
ç‚¹å‡»**ä¿å­˜**æŒ‰é’®ï¼Œç„¶åå°±å‡ºç°äº†ZTTçš„ä½™é¢çš„æ˜¾ç¤ºï¼š
```
1 ZTT
```
#### MetaMaskæ˜¾ç¤ºä»£å¸
åœ¨MetaMaskæµ®åŠ¨æ¡†ä¸­é€‰æ‹©**Tokens**é€‰é¡¹å¡ï¼Œç‚¹å‡»**ADD TOKEN**æŒ‰é’®ï¼Œè¾“å…¥åˆçº¦åœ°å€ï¼š
```
0x4292f38c4e1f13cf6f7a37a194e1616b365d5247
```
MetaMaskè‡ªåŠ¨å¡«å……å‰©ä½™è¾“å…¥æ¡†ï¼Œç„¶åæ˜¾ç¤ºä½™é¢ï¼š
```
You own 1 token
1.000 ZTT
```

### æµ‹è¯•ä»£å¸
ä¸‹é¢æµ‹è¯•ä¸€ä¸‹ä»£å¸åœ¨å¤šä¸ªè´¦æˆ·ä¹‹é—´çš„è½¬ç§»ã€‚  

åœ¨MetaMaskä¸­æ–°å»ºä¸€ä¸ªè´¦å·ã€‚æ–¹æ³•æ˜¯ç‚¹å‡»MetaMaskæµ®åŠ¨æ¡†å³ä¸Šè§’çš„å¤´åƒå›¾æ ‡ï¼Œç‚¹é€‰**Create Account**ï¼Œå°±åˆ›å»ºäº†`Acccount 2`ã€‚æ–°è´¦æˆ·çš„åœ°å€ï¼š
```
0xaD32794E0681ab84972F74D799bF683aA87a45c6
```
Account2çš„ä½™é¢æ˜¯ï¼š0ETHã€0ZTTã€‚  

è±¡ä¸Šæ–‡ä¸€æ ·å‘faucetè®¨è¦1ä¸ªETHã€‚ä¼šå¯åŠ¨ä¸€ä¸ªäº¤æ˜“ï¼Œç„¶ååœ¨MetaMaskä¸­çœ‹åˆ°Account2æ‹¥æœ‰äº†1ETHã€‚

#### Account2å‘Account1è½¬è´¦ETH
MetaMaskçš„å½“å‰è´¦æˆ·æ˜¯Account2ï¼Œç‚¹**SEND**æŒ‰é’®ï¼Œåœ¨äº¤æ˜“çš„ç›®æ ‡åœ°å€ä¸­ç²˜è´´å…¥Account1çš„åœ°å€ï¼š
```
0x313117B29B6980603525e2de87145315879c17Eb
```
æ•°é‡ä¸Šè¾“å…¥0.5ï¼Œç„¶åç‚¹**NEXT**æŒ‰é’®ï¼Œå†ç‚¹**SUBMIT**å°±æäº¤äº†è½¬è´¦äº¤æ˜“ã€‚åœ¨**SENT**é€‰é¡¹å¡ä¸­å¯ä»¥çœ‹åˆ°æ–°å»ºçš„äº¤æ˜“ã€‚ç‚¹å‡»è¯¥äº¤æ˜“ä¼šè·³åˆ°Etherscanæµè§ˆå™¨ï¼Œæµè§ˆå™¨ä¼šæ˜¾ç¤ºè¿™ä¸ªäº¤æ˜“çš„è¯¦ç»†ä¿¡æ¯ã€‚

äº¤æ˜“è¢«ç¡®è®¤åï¼ˆä»¥å¤ªåŠçš„ç¡®è®¤å‘¨æœŸæ˜¯15ç§’å·¦å³ï¼‰ï¼ŒMetaMaskä¸­å¯ä»¥çœ‹åˆ°è´¦æˆ·ä¸­ETHä½™é¢çš„å˜åŒ–ã€‚

#### ä»£å¸çš„è½¬è´¦
ä»é€šè¿‡ [https://www.myetherwallet.com](https://www.myetherwallet.com) æ¥å®Œæˆä»£å¸ZTTçš„è½¬è´¦ã€‚

1. é€šè¿‡MetaMaskåˆ‡æ¢è´¦æˆ·åˆ°Account1ï¼Œå¯¼å‡ºAccount1çš„ç§é’¥ã€‚

2. è¿›å…¥myetherwallet.comï¼Œé€šè¿‡â€œå‘é€ä»¥å¤ªå¸/å‘é€ä»£å¸â€èœå•å¯¼å…¥ç§é’¥(è§£é”)ã€‚

3. åœ¨â€œå‘é€è‡³åœ°å€â€ä¸­è¾“å…¥Account1çš„åœ°å€`0x313117B29B6980603525e2de87145315879c17Eb`ï¼Œè½¬è´¦é‡‘é¢æ˜¯0.1ï¼Œä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©ZTTï¼Œç‚¹â€œç”Ÿæˆäº¤æ˜“â€æŒ‰é’®

4. ä¼šæœ‰æç¤ºï¼Œæ„æ€æ˜¯å¾—ç­‰ä»¥å¤ªåŠçš„çŸ¿å·¥ç”ŸæˆåŒºå—æ‰ç®—è½¬è´¦æˆåŠŸã€‚å¯ä»¥æŒ‰æç¤ºå»çœ‹äº¤æ˜“çŠ¶æ€ã€‚

5. æˆåŠŸååœ¨MetaMaskä¸­åˆ‡æ¢è´¦æˆ·åˆ°Account2ï¼Œå¯ä»¥çœ‹åˆ°Account2çš„ZTTä»£å¸çš„ä½™é¢ç°åœ¨æ˜¯0.1ZTTäº†ã€‚



## æ­å»ºåŸºäºä»¥å¤ªåŠgo-ethereumçš„ç§æœ‰é“¾ç¯å¢ƒ
[åŸåšæ–‡](http://blog.csdn.net/wo541075754/article/details/53064877)
å®‰è£…åœ¨ubuntu16ä¸Šã€‚

### å®‰è£…go-ethereumå®¢æˆ·ç«¯
```
sudo apt-get install software-properties-common
sudo add-apt-repository -y ppa:ethereum/ethereum
sudo add-apt-repository -y ppa:ethereum/ethereum-dev
sudo apt-get update
sudo apt-get install ethereum
```
#### åˆ›ä¸–åŒºå—
å·¥ä½œç›®å½•æ˜¯`~/geth`ã€‚æ–°å»ºåˆ›ä¸–å—jsonæ–‡ä»¶piccgenesis.jsonã€‚å†…å®¹å¦‚ä¸‹ï¼š
```
{
 "nonce":"0x0000000000000042",
 "mixhash":"0x0000000000000000000000000000000000000000000000000000000000000000",
 "difficulty": "0x4000",
 "alloc": {},
 "coinbase":"0x0000000000000000000000000000000000000000",
 "timestamp": "0x00",
 "parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000",
 "extraData": "SecBroBlock",
 "gasLimit":"0x0000ffff"
}
```
åˆå§‹åŒ–ï¼š
```
geth init ~/geth/genesis.json
```
#### å¯åŠ¨ç§æœ‰é“¾
```
$ geth --identity "secbro etherum" --rpc --rpccorsdomain "*" --datadir "~/geth/chain2" --port "30303" --rpcapi "db,eth,net,web3" -- networkid 95518 console --dev 
...
IPC endpoint opened: /home/vagrant/geth/chain2/geth.ipc
HTTP endpoint opened: http://127.0.0.1:8545
```
æœ€åçš„--devè¡¨ç¤ºä»¥å¼€å‘æ¨¡å¼å¯åŠ¨

#### å‘½ä»¤è¡Œæµ‹è¯•
çœ‹åˆ°å¯åŠ¨é¡µé¢ä¹‹åï¼Œæ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼Œå¹¶æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œå¹¶æŠŠæ—¥å¿—è¾“å‡ºåˆ°æ–‡æœ¬æ–‡ä»¶å½“ä¸­ï¼š
```
$ geth --dev console 2>> file_to_log_output
> eth.accounts
["0xedfc191463e44db52fd7dc1562bd8379d28c32c2"]
> personal.newAccount("1")
"0xe03a714a803e54525b8a6352990ead0b4e747bd6"
> eth.accounts
["0xedfc191463e44db52fd7dc1562bd8379d28c32c2", "0xe03a714a803e54525b8a6352990ead0b4e747bd6"]
> eth.blockNumber
0
```
eth.accountsæ˜¯æŸ¥çœ‹è´¦æˆ·ã€‚personal.newAccountæ˜¯æ–°å»ºç”¨æˆ·ï¼Œæ‹¬å·é‡Œæ˜¯å¯†ç ã€‚æœ€åæ˜¯æŸ¥çœ‹åŒºå—é«˜åº¦ã€‚

å¯åŠ¨å’Œåœæ­¢æŒ–çŸ¿ï¼š`miner.start()`ã€`miner.stop()`ã€‚

æŸ¥çœ‹è´¦æˆ·ä½™é¢å’Œè½¬è´¦ï¼š
```
> eth.getBalance("0xe03a714a803e54525b8a6352990ead0b4e747bd6")
0
> eth.sendTransaction({from:"0xedfc191463e44db52fd7dc1562bd8379d28c32c2",to:"0xe03a714a803e54525b8a6352990ead0b4e747bd6",value:web3.toWei(3,"ether")})
0x9c6c89f73133ee8d28ac07db9a7f670b79f8c4f24cabdb13e92d185f30b57646
> eth.getBalance("0xe03a714a803e54525b8a6352990ead0b4e747bd6")
3000000000000000000
```
è½¬äº†3ETHå´æ˜¾ç¤º3åé¢18ä¸ª0ï¼Œå› ä¸ºæ˜¾ç¤ºçš„è®¡é‡å•ä½æ˜¯Weiã€‚

æŒ‰ctrl+Då¯ä»¥é€€å‡ºäº¤äº’ç¯å¢ƒã€‚

### truffleå’Œtestrpc
truffleæ˜¯ä»¥å¤ªåŠæœ€å—æ¬¢è¿çš„ä¸€ä¸ªå¼€å‘æ¡†æ¶ã€‚å®‰è£…ï¼š
```
$ npm install -g truffle
```
truffleæ˜¯æœ¬åœ°çš„ç”¨æ¥ç¼–è¯‘ã€éƒ¨ç½²æ™ºèƒ½åˆçº¦çš„å·¥å…·ã€‚testrpcä¸åŒäºgethï¼Œgethæ˜¯çœŸæ­£çš„ä»¥å¤ªåŠç¯å¢ƒï¼Œtestrpcæ˜¯åœ¨æœ¬åœ°ä½¿ç”¨å†…å­˜æ¨¡æ‹Ÿçš„ä¸€ä¸ªä»¥å¤ªåŠç¯å¢ƒï¼Œå¯¹äºå¼€å‘è°ƒè¯•æ¥è¯´ï¼Œæ›´ä¸ºæ–¹ä¾¿å¿«æ·ï¼Œå½“åˆçº¦åœ¨testrpcä¸­æµ‹è¯•é€šè¿‡åï¼Œå†éƒ¨ç½²åˆ°gethä¸­å»ã€‚æ‰€ä»¥å¯ä»¥è¯´truffleå’Œtestrpcå°±æ˜¯ä¸¤å¤§æ€å™¨ã€‚

é¡¹ç›®åˆå§‹åŒ–ï¼š
```
$ cd ~/geth
$ mkdir truffleProject && cd truffleProject
$ truffle init
```
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä¹‹åï¼Œtruffleä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ªMetaCoinçš„demoã€‚

å®‰è£…testrpcï¼š
```
npm install -g ethereumjs-testrpc
```
å±å¹•æç¤ºè¯¥é¡¹ç›®å·²ç»æ”¹åä¸ºganache-cliã€‚é‡æ–°å®‰è£…ï¼š
```
npm install -g ganache-cli
```
è¿è¡Œå‘½ä»¤ä¹Ÿç”±testrpcæ›´åä¸ºganache-cliã€‚

ganache(å³testrpc)ä¹Ÿä¼šä½¿ç”¨8545ç«¯å£ï¼Œæ‰€ä»¥éœ€è¦å…ˆåœæ­¢ä¹‹å‰å¦ä¸€ä¸ªç»ˆç«¯çª—å£çš„gethã€‚ç„¶åæ‰§è¡Œï¼š
```
$ ganache-cli
...
Available Accounts
==================
(0) 0x1cc3599dce8bfbe2d96b2a0f7507cfbd71b1ef0b
(1) 0x2fc3a30008ce738195a2704a37cec3509c6edbbe
(2) 0x9c7d4ac0e0d5d13a267c28a8da9c050e3ce81f13
(3) 0xb369d8bcd384fd55b4cf718661eba862ef7feb32
(4) 0x37d18b941366708ce02bfc1df660eb7a68b72ea1
(5) 0xbded52ecc06e1e07bd4f0a6b3aa2067e74cec832
(6) 0xbf585d6aeaa82445dd2b4b326b021f4bf070411c
(7) 0xbed1d6ca867e6ab1cd17cb4a5bf91101641e45dc
(8) 0xa9cc18829e9bd5ad858d83f7bf5848f379afe814
(9) 0xa9157fbce92203255f0be7a906d01841e4320ed9

Private Keys
==================
(0) 484c3525ddd00e22b65fbed1609d220007eaa45682e4bee7db001708f20cfcbf
(1) 4907f855fe3479d8a3113d7c818324044fb33afb78921ab78b3cf1c70f525c54
(2) 96ad5a8b9d2c7376d76e4d4f24a278f0b201f40583ede5b47c2f8648cadb1787
(3) 5d87b37179b7f241ca6b5e628769effac939ee59d121f544cd0fd4271901ba38
(4) 82e6003b37668866d5ba4a57946f65e7868e89c3530f41444995a4b062cd59e9
(5) 92b01af2eb726f76e1bf7c14311804de8536737001564070ec5efe454a179ef9
(6) 9e18ba2e0d6b281e8d40a7de27fc25d33b7e3dab82c8a1ba32fe55036479d09c
(7) 84f5ed50f8c0e5b8fcd1a3badc7e3215165769a6c2eb234d745eeeac24e1ba69
(8) 47b954d9d163ad47d811e5693fe15b7ed4100d06e8b45e0a142679029e7ee4b3
(9) 6546f97235297ecdcd533fc7fdb23c940cd075055d0bdffce94e2a37e7147055

HD Wallet
==================
Mnemonic:      clever trust network couple give become cereal skate idle planet term spin
Base HD Path:  m/44'/60'/0'/0/{account_index}

Listening on localhost:8545
```
çœ‹ä¸Šå»ganacheä»£æ›¿gethæä¾›äº†ä¸€ä¸ªä»¥å¤ªåŠçš„è¿è¡Œç¯å¢ƒã€‚å±å¹•ä¸Šæ˜¾ç¤ºçš„æ˜¯ä¸€äº›æµ‹è¯•ç”¨çš„è´¦å·ä»¥åŠå¯¹åº”çš„ç§é’¥ã€‚

#### éƒ¨ç½²å’Œè¿è¡Œ
å°†å½“å‰é¡¹ç›®éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒï¼š
```
$ cd truffleProject
$ truffle deploy
Using network 'development'.
Network up to data.
```
è¿è¡ŒwebæœåŠ¡ï¼ŒåŸæ–‡æ˜¯`truffle serve`ã€‚ä½†å®æµ‹æŠ¥é”™ï¼š
```
TypeError: fsevents is not a constructor
```
ç½‘ä¸Šæ‰¾åˆ°çš„[ç­”æ¡ˆ](https://github.com/trufflesuite/truffle/issues/463) æ˜¯ç”¨`npm run dev`ä»£æ›¿ã€‚
```
$ cd truffleProject2
 npm run dev

> truffle-init-webpack@0.0.2 dev /home/vagrant/geth/truffleProject2
> webpack-dev-server

Project is running at http://localhost:8080/
webpack output is served from /
Hash: 06cbdfeabaa7f12839e6
Version: webpack 2.7.0
...
webpack: Compiled successfully.
```
è¿™æ˜¯ç”¨`webpack-dev-server`ä»£æ›¿äº†`truffle serve`ã€‚truffleå®˜æ–¹æ–‡æ¡£ä¹Ÿè¯´åº”è¯¥è¿™ä¹ˆåšã€‚

#### æµ‹è¯•
æŒ‰åšæ–‡åŸæ–‡ç”¨æµè§ˆå™¨è®¿é—®http://localhost:8080 åº”æ˜¾ç¤ºå¦‚ä¸‹é¡µé¢ï¼š
![](http://img.blog.csdn.net/20161114210305453)
æˆ‘ç”¨curlè®¿é—®localhost:8080ä¸ä¸Šé¢çš„å›¾ç‰‡å†…å®¹ä¸€æ ·ã€‚è™½ç„¶ç”¨NATå°†8080æ˜ å°„åˆ°äº†windowsï¼Œä½†åœ¨windowsä¸‹æµè§ˆå™¨è®¿é—®localhost:8080å´å‡ºä¸æ¥é¡µé¢ï¼Œå¯èƒ½æ˜¯webpack-dev-serverç›‘å¬çš„æ–¹å¼ä¸NATä¸å…¼å®¹ã€‚

é€šè¿‡ä¸Šé¢çš„é¡µé¢å¯ä»¥å®Œæˆè½¬è´¦.

## ç¬”è®°
### è¯¦è§£ä»¥å¤ªåŠçš„å·¥ä½œåŸç†
[1](https://baijiahao.baidu.com/s?id=1581231980661527205&wfr=spider&for=pc)
ä»¥å¤ªåŠçš„å“ˆå¸Œç®—æ³•:KECCAK-256  

ä»¥å¤ªåŠæœ‰ä¸¤ç§ç±»å‹çš„è´¦æˆ·ï¼š

1. å¤–éƒ¨æ‹¥æœ‰çš„è´¦æˆ·ï¼Œè¢«ç§é’¥æ§åˆ¶ä¸”æ²¡æœ‰ä»»ä½•ä»£ç ä¸ä¹‹å…³è”

2. åˆçº¦è´¦æˆ·ï¼Œè¢«å®ƒä»¬çš„åˆçº¦ä»£ç æ§åˆ¶ä¸”æœ‰ä»£ç ä¸ä¹‹å…³è”

![](https://t12.baidu.com/it/u=3959818670,2742092085&fm=173&s=B1B14D308322650B5B4D7C5A030050F0&w=640&h=298&img.JPEG) 

### ä»¥å¤ªåŠé»„çš®ä¹¦
[åœ°å€](https://github.com/yuange1024/ethereum_yellowpaper/blob/master/Paper_Chinese.pdf)  

**è´¦æˆ·çŠ¶æ€**åŒ…å«ä»¥ä¸‹å››ä¸ªå­—æ®µï¼š

- nonceï¼Œéšæœºæ•°ï¼šè¿™ä¸ªå€¼ç­‰äºè´¦æˆ·å‘å‡ºçš„äº¤æ˜“æ•°ä¸è¿™ä¸ªè´¦æˆ·åˆ›å»ºçš„åˆçº¦æ•°é‡ä¹‹å’Œã€‚ï¼ˆåˆ›å»ºåˆçº¦æœ¬æ¥å°±æ˜¯äº¤æ˜“çš„ä¸€ç§ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼å°±æ˜¯è¯¥è´¦æˆ·çš„äº¤æ˜“æ•°ï¼‰

- balanceï¼Œä½™é¢ï¼šè¡¨ç¤ºè¿™ä¸ªè´¦æˆ·æ‹¥æœ‰å¤šå°‘Weiã€‚ï¼ˆ1ETH=Wei*10^18ï¼‰

- storageRootï¼Œå­˜å‚¨æ ¹èŠ‚ç‚¹ï¼šä¿å­˜è´¦æˆ·å†…å®¹çš„Merkle Pariciaæ ‘æ ¹èŠ‚ç‚¹çš„256ä½å“ˆå¸Œç¼–ç åˆ°å­—å…¸æ ‘ä¸­ï¼Œä½œä¸ºä»256ä½æ•´æ•°é”®å€¼å“ˆå¸Œçš„Keccak 256ä½å“ˆå¸Œåˆ°256ä½æ•´æ•°çš„RLP-ç¼–ç æ˜ å°„ã€‚

- codeHashï¼Œä»£ç å“ˆå¸Œï¼šè¿™ä¸ªè´¦æˆ·çš„ENM(Ethereum Virtual Machineï¼Œä»¥å¤ªåŠè™šæ‹Ÿæœº)ä»£ç å“ˆå¸Œå€¼â€”â€”ä»£ç æ‰§è¡Œæ—¶ï¼Œè¿™ä¸ªåœ°å€ä¼šæ¥å—ä¸€ä¸ªæ¶ˆæ¯è°ƒç”¨ï¼›å®ƒå’Œå…¶ä»–å­—æ®µä¸åŒï¼Œåˆ›å»ºåä¸å¯æ›´æ”¹ã€‚çŠ¶æ€æ•°æ®åº“ä¸­åŒ…å«æ‰€æœ‰åƒè¿™æ ·çš„ä»£ç ç‰‡æ®µå“ˆå¸Œï¼Œä»¥ä¾¿åç»­ä½¿ç”¨ã€‚

#### äº¤æ˜“çš„å­—æ®µ
- nonceï¼Œéšæœºæ•°ï¼šè´¦æˆ·çŠ¶æ€ä¸­nonceçš„å½“å‰å€¼

- gasPriceï¼Œç‡ƒæ–™ä»·æ ¼ï¼šä¸ºæ‰§è¡Œäº¤æ˜“æ‰€éœ€è¦çš„è®¡ç®—èµ„æºä»˜å‡ºçš„gasä»·æ ¼ï¼Œä»¥Weiä¸ºå•ä½

- gasLimitï¼Œç‡ƒæ–™ä¸Šé™ï¼šç”¨äºæ‰§è¡Œäº¤æ˜“çš„æœ€å¤§gasæ•°é‡ã€‚è¿™ä¸ªå€¼é¡»åœ¨äº¤æ˜“å‰è®¾ç½®ï¼Œä¸”è®¾ç½®åä¸èƒ½å†ä¿®æ”¹ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºæ²¹ç®±å¤§å°ï¼Œå¦‚æœè·¯ç¨‹è¿œè¯·æ¢å¤§æ²¹ç®±ï¼‰

- toï¼Œæ¥æ”¶è€…åœ°å€ï¼šæ¶ˆæ¯è°ƒç”¨æ¥æ”¶è€…çš„160ä½åœ°å€ã€‚å¯¹äºåˆçº¦åˆ›å»ºäº¤æ˜“ï¼Œæ— éœ€æ¥æ”¶è€…åœ°å€

- valueï¼Œè½¬è´¦é¢åº¦ï¼šè½¬åˆ°æ¥æ”¶è€…è´¦æˆ·çš„é¢åº¦ï¼Œä»¥Weiä¸ºå•ä½ã€‚å¯¹äºåˆçº¦åˆ›å»ºï¼Œè¡¨ç¤ºæåŠ©åˆ°åˆçº¦åœ°å€çš„é¢åº¦

- initï¼Œåˆå§‹åŒ–ï¼ˆåˆçº¦åˆ›å»ºä¸“ç”¨å­—æ®µï¼‰ï¼šä¸€ä¸ªä¸é™åˆ¶å¤§å°çš„å­—èŠ‚æ•°ç»„ï¼Œè¡¨ç¤ºè´¦æˆ·åˆå§‹åŒ–ç¨‹åºçš„EVMä»£ç ã€‚initæ˜¯EVMä»£ç ç‰‡æ®µï¼›æ‰§è¡Œinitåä¼šè¿”å›å¦å¤–ä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œæ¯æ¬¡åˆçº¦æ¥å—å°è¯´è°ƒç”¨ï¼ˆé€šè¿‡äº¤æ˜“æˆ–å†…éƒ¨è°ƒç”¨ï¼‰åéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªä»£ç ç‰‡æ®µã€‚ä»…å½“åˆçº¦è´¦æˆ·åˆ›å»ºæ—¶ä¼šæ‰§è¡Œä¸€æ¬¡initã€‚

- dataï¼Œæ•°æ®ï¼ˆæ¶ˆæ¯è°ƒç”¨ä¸“ç”¨å­—æ®µï¼‰ï¼šä¸€ä¸ªä¸é™åˆ¶å¤§å°çš„å­—èŠ‚æ•°æ®ï¼Œè¡¨ç¤ºæ¶ˆæ¯è°ƒç”¨çš„è¾“å…¥æ•°æ®

#### åŒºå—çš„å­—æ®µ
åŒºå—å¤´å­—æ®µï¼š

- parentHashï¼Œçˆ¶å—å“ˆå¸Œï¼šçˆ¶åŒºå—å¤´çš„Keccak 256ä½å“ˆå¸Œ

- ommersHashï¼Œå”é“¾å“ˆå¸Œï¼šå½“å‰åŒºå—çš„å”é“¾åˆ—è¡¨Keccak 256ä½å“ˆå¸Œ

- beneficiaryï¼Œå—ç›Šè€…åœ°å€ï¼šæˆåŠŸæŒ–åˆ°è¿™ä¸ªåŒºå—çš„160ä½åœ°å€ï¼Œè¿™ä¸ªåŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“è´¹éƒ½ä¼šè½¬åˆ°è¿™ä¸ªåœ°å€

- stateRootï¼ŒçŠ¶æ€å­—å…¸æ ‘æ ¹èŠ‚ç‚¹å“ˆå¸Œï¼šçŠ¶æ€å­—å…¸æ ‘æ ¹èŠ‚ç‚¹çš„Keccak 256ä½å“ˆå¸Œï¼Œäº¤æ˜“æ‰“åŒ…åˆ°å½“å‰åŒºå—ä¸”åŒºå—å®šç¨¿åå¯ä»¥ç”Ÿæˆè¿™ä¸ªå€¼

- transactionsRootï¼Œäº¤æ˜“å­—å…¸æ ‘æ ¹èŠ‚ç‚¹å“ˆå¸Œï¼šäº¤æ˜“å­—å…¸æ ‘æ ¹èŠ‚ç‚¹Keccak 256ä½å“ˆå¸Œï¼Œåœ¨äº¤æ˜“å­—å…¸æ ‘å«æœ‰åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“åˆ—è¡¨

- receiptsRootï¼Œæ¥å—è€…å­—å…¸æ ‘æ ¹èŠ‚ç‚¹å“ˆå¸Œï¼šæ¥å—è€…å­—å…¸æ ‘æ ¹èŠ‚ç‚¹çš„Keccak 256ä½å“ˆå¸Œï¼Œåœ¨æ¥å—è€…å­—å…¸æ ‘å«æœ‰åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“ä¿¡æ¯ä¸­çš„æ¥æ”¶è€…ã€‚

ï¼ˆåç•¥ï¼‰

#### äº¤æ˜“æ”¶æ®
ä¸ºäº†è®©äº¤æ˜“ä¿¡æ¯ç¼–ç èƒ½æœ‰åˆ©äºé›¶çŸ¥è¯†è¯æ˜ã€ç´¢å¼•ã€æœç´¢ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåŒ…å«ä¸€å®šä¿¡æ¯çš„äº¤æ˜“æ”¶æ®è¿›è¡Œç¼–ç ã€‚ä¿å­˜åœ¨ä¸€ä¸ªç´¢å¼•å­—å…¸æ ‘ä¸­ã€‚äº¤æ˜“æ”¶æ®æ˜¯ä¸€ä¸ªåŒ…å«å››ä¸ªæ¡ç›®çš„å…ƒç»„ï¼šäº¤æ˜“åçš„çŠ¶æ€ï¼›å½“å‰åŒºå—ä¸­äº¤æ˜“ç´¯è®¡ç‡ƒæ–™ä½¿ç”¨é‡ï¼Œäº¤æ˜“å‘ç”Ÿåä¼šç«‹å³æ›´æ–°è¿™ä¸ªå€¼ï¼›äº¤æ˜“æ‰§è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºçš„æ—¥å¿—é›†åˆï¼›æ—¥å¿—Bloomè¿‡æ»¤å™¨ã€‚

#### æ•´ä½“æœ‰æ•ˆæ€§

å¦‚æœä¸€ä¸ªåŒºå—åŒæ—¶æ»¡è¶³ä¸€ä¸‹å‡ ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬æ‰èƒ½è®¤ä¸ºè¿™ä¸ªåŒºå—æ˜¯æœ‰æ•ˆçš„ï¼šå½“ä»èµ·å§‹çŠ¶æ€ï¼ˆçˆ¶å—çš„æœ€ç»ˆçŠ¶æ€ï¼‰æŒ‰é¡ºåºæ‰§è¡Œå®Œç”Ÿæˆæ–°çš„çŠ¶æ€åï¼Œåœ¨å†…éƒ¨è¦ä¿æŒä¸€è‡´ï¼ŒåŒ…æ‹¬å”é“¾ã€äº¤æ˜“åŒºå—å“ˆå¸Œã€ç»™å®šçš„äº¤æ˜“ã€‚

### truffle
åˆå§‹åŒ–ï¼Œç”Ÿæˆé¡¹ç›®éª¨æ¶ï¼š
```
cd ~/geth/truffleProject
truffle init
testrpc
```
testrpcè¿è¡Œäº†ä¸€ä¸ªæ¨¡æ‹Ÿçš„ä»¥å¤ªåŠç¯å¢ƒï¼ŒæœåŠ¡ç«¯å£æ˜¯8545ã€‚

å¦å¤–èµ·ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œç¼–è¾‘å½“å‰ç›®å½•ä¸‹çš„truffle.jsï¼š
```javascript
module.exports = {
  networks: {
    development: {
      host: "localhost",
      port: 8545,
      network_id: "*" // Match any network id
    }
  }
};
```
ç„¶åæ‰§è¡Œï¼š
```
$ truffle deploy
Using network 'development'.
Network up to date.
```
truffle serveå·²ç»ä¸æ¨èäº†ï¼Œè€Œç”¨ç±»ä¼¼webpackï¼šhttp://truffleframework.com/boxes/webpack

###  ä»¥å¤ªåŠå®¢æˆ·ç«¯Ethereum Walletä¸GethåŒºåˆ«ç®€ä»‹
[åŸæ–‡](http://blog.csdn.net/wo541075754/article/details/77619533)   
Gethæ˜¯ä»¥å¤ªåŠå®¢æˆ·ç«¯ï¼Œå«æœ‰åˆ†å¸ƒå¼è´¦æœ¬æ•°æ®ï¼Œå¯ä»¥è¾¾å‡ åGã€‚   
Ethereum Walletæ˜¯ä¸ªå›¾å½¢UIï¼Œå«æœ‰è´¦æˆ·ç§é’¥ï¼Œå¯ä»¥ä»£è¡¨ä¸ªäººèº«ä»½ä¸ä»¥å¤ªåŠäº¤äº’ï¼Œå¦‚è½¬è´¦ã€‚   

## Truffleå®˜æ–¹æ•™ç¨‹
[å®˜æ–¹åœ°å€](http://truffleframework.com/tutorials/)   

### ä»¥å¤ªåŠæ¦‚è¿°
[åŸæ–‡åœ°å€](http://truffleframework.com/tutorials/ethereum-overview)  
è¿›è¡ŒTruffleæ•™ç¨‹å‰ï¼Œè¦æ±‚å…ˆè¯»ä¸€ä¸‹è¿™ä¸ªâ€œä»¥å¤ªåŠæ¦‚è¿°â€ã€‚è¿™é‡Œå°†æ¦‚è¿°ä¸­å…³é”®å†…å®¹æ‘˜å½•åœ¨è¿™é‡Œã€‚ä¸åŒ…æ‹¬åŒºå—é“¾çš„ä»‹ç»ï¼Œåªæœ‰å…³äºä»¥å¤ªåŠçš„éƒ¨åˆ†ã€‚  

#### ä»¥å¤ªåŠæ˜¯ä»€ä¹ˆ
ä»¥å¤ªåŠæ˜¯ä¸€ä¸ªåŒºå—é“¾ï¼Œå…è®¸ä½ åœ¨å…¶å¯ä¿¡èµ–çš„ç¯å¢ƒä¸­è¿è¡Œç¨‹åºã€‚è¿™ä¸æ¯”ç‰¹å¸åŒºå—é“¾å½¢æˆé²œæ˜å¯¹æ¯”ï¼ŒåŒºå—é“¾åªå…è®¸ä½ ç®¡ç†åŠ å¯†è´§å¸ã€‚

ä¸ºæ­¤ï¼Œä»¥å¤ªåŠæœ‰ä¸€ä¸ªåä¸ºä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰çš„è™šæ‹Ÿæœºã€‚EVMå…è®¸ä»£ç åœ¨åŒºå—é“¾ä¸­è¿›è¡ŒéªŒè¯å’Œæ‰§è¡Œï¼Œä»è€Œä¿è¯å…¶åœ¨æ¯ä¸ªäººçš„æœºå™¨ä¸Šä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚æ­¤ä»£ç åŒ…å«åœ¨â€œæ™ºèƒ½åˆçº¦â€ä¸­ã€‚

é™¤äº†è¿½è¸ªè´¦æˆ·ä½™é¢ä¹‹å¤–ï¼Œä»¥å¤ªåŠè¿˜ä¼šåœ¨åŒºå—é“¾ä¸Šç»´æŠ¤EVMçš„çŠ¶æ€ã€‚æ‰€æœ‰èŠ‚ç‚¹è¿è¡Œæ™ºèƒ½åˆçº¦ï¼Œæ¥éªŒè¯åˆçº¦åŠå…¶è¾“å‡ºçš„å®Œæ•´æ€§ã€‚

#### ä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦
**æ™ºèƒ½åˆçº¦æ˜¯åœ¨EVMä¸Šè¿è¡Œçš„ä»£ç **ã€‚æ™ºèƒ½åˆçº¦å¯ä»¥æ¥å—å¹¶å­˜å‚¨ä»¥å¤ªå¸ã€æ•°æ®ï¼Œæˆ–ä¸¤è€…çš„ç»„åˆã€‚ç„¶åï¼Œä½¿ç”¨ç¼–å…¥åˆåŒçš„é€»è¾‘ï¼Œå®ƒå¯ä»¥å°†ä»¥å¤ªå¸åˆ†é…ç»™å…¶ä»–è´¦æˆ·ç”šè‡³å…¶ä»–æ™ºèƒ½åˆçº¦ã€‚

è¿™æ˜¯Bobå’ŒAliceçš„æ™ºèƒ½åˆçº¦ç¤ºä¾‹ã€‚çˆ±ä¸½ä¸æƒ³è˜è¯·é²å‹ƒå»ºç«‹ä¸€ä¸ªéœ²å°ï¼Œä»–ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ‰˜ç®¡åˆåŒï¼ˆä¸€ä¸ªåœ°æ–¹æ¥å­˜é’±ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶ï¼‰åœ¨æœ€ç»ˆäº¤æ˜“ä¹‹å‰å­˜å‚¨ä»–ä»¬çš„ä»¥å¤ªå¸ã€‚
![](http://truffleframework.com/tutorials/images/ethereum-overview/smart-contract-step1.png)
1. çˆ±ä¸½ä¸åŒæ„åœ¨æ‰˜ç®¡åˆåŒä¸­å­˜å…¥éœ²å°çš„ä»˜æ¬¾ï¼Œè€Œé²å‹ƒåŒæ„å­˜å…¥ç›¸ç­‰çš„é‡‘é¢  
![](http://truffleframework.com/tutorials/images/ethereum-overview/smart-contract-step2.png)  
2. é²å‹ƒå®Œæˆéœ²å°é¡¹ç›®ï¼Œçˆ±ä¸½ä¸ç»™äºˆæ™ºèƒ½åˆåŒè®¸å¯é‡Šæ”¾èµ„é‡‘
![](http://truffleframework.com/tutorials/images/ethereum-overview/smart-contract-step3.png)
3. é²å‹ƒæ”¶åˆ°çˆ±ä¸½ä¸çš„ä»˜æ¬¾å’ŒæŠ¼é‡‘
ï¼ˆå¯ä»¥æŠŠè§„å®šå†™å…¥åˆåŒä»£ç ä¸­ï¼šå¦‚æœé²å‹ƒä¸èƒ½å»ºç«‹éœ²å°æˆ–è€…å¦‚æœä»–è¡¨ç°ä¸ä½³çš„è¯ï¼Œéœ€è¦æŠŠé²å‹ƒçš„æŠ¼é‡‘èµ”å¿ç»™çˆ±ä¸½ä¸ã€‚ï¼‰
**æ™ºèƒ½åˆçº¦æ˜¯ç”¨ä¸€ç§åä¸ºSolidityçš„è¯­è¨€ç¼–å†™çš„**ã€‚[Solidity](https://solidity.readthedocs.io/)æ˜¯é™æ€ç±»å‹çš„ï¼Œæ”¯æŒç»§æ‰¿ã€åº“å’Œå¤æ‚çš„ç”¨æˆ·å®šä¹‰ç±»å‹ç­‰ç­‰ã€‚Solidityè¯­æ³•ä¸JavaScriptç±»ä¼¼ã€‚

#### ä»¥å¤ªåŠç½‘ç»œ
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æè¿°äº†ä»¥å¤ªåŠå…¬å¼€é“¾ï¼ˆæˆ–ç§°â€œMainNetâ€ï¼‰ã€‚åœ¨MainNetä¸Šï¼ŒåŒ…æ‹¬è´¦æˆ·ä½™é¢å’Œäº¤æ˜“åœ¨å†…çš„é“¾ä¸Šæ•°æ®æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºèŠ‚ç‚¹å¹¶å¼€å§‹éªŒè¯äº¤æ˜“ã€‚ä»¥å¤ªå¸åœ¨è¿™ä¸ªç½‘ç»œä¸Šæœ‰å¸‚åœºä»·å€¼ï¼Œå¯ä»¥å…‘æ¢æˆå…¶ä»–åŠ å¯†è´§å¸æˆ–è€…ç¾å…ƒç­‰æ³•å®šè´§å¸ï¼ˆfiat currencyï¼Œç®€ç§°æ³•å¸ï¼‰ã€‚

1. æœ¬åœ°æµ‹è¯•ç½‘ç»œ
ä»¥å¤ªåŠåŒºå—é“¾å¯ä»¥åœ¨æœ¬åœ°æ¨¡æ‹Ÿå¼€å‘ã€‚æœ¬åœ°æµ‹è¯•ç½‘ç»œå¯ä»¥å³æ—¶å¤„ç†äº‹åŠ¡ï¼Œå¹¶å¯æ ¹æ®éœ€è¦åˆ†é…ä»¥å¤ªå¸ã€‚å­˜åœ¨ä¸€ç³»åˆ—ä»¥å¤ªåŠæ¨¡æ‹Ÿå™¨; æˆ‘ä»¬æ¨è[Ganache](http://truffleframework.com/ganache)ã€‚

2. å…¬å…±æµ‹è¯•ç½‘ç»œ
åœ¨æœ€ç»ˆéƒ¨ç½²åˆ°ä¸»ç½‘ç»œä¹‹å‰ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨å…¬å…±æµ‹è¯•ç½‘ç»œï¼ˆæˆ–æµ‹è¯•ç½‘ï¼‰æ¥æµ‹è¯•ä»¥å¤ªç½‘åº”ç”¨ç¨‹åºã€‚è¿™äº›ç½‘ç»œä¸Šçš„ä»¥å¤ªå¸ä»…ç”¨äºæµ‹è¯•ç›®çš„ï¼Œæ²¡æœ‰ä»»ä½•ä»·å€¼ã€‚

æœ‰ä¸‰ä¸ªå…¬å…±æµ‹è¯•ç½‘ç»œè¢«å¹¿æ³›ä½¿ç”¨ï¼š

- **Ropsten**ï¼šç”±ä»¥å¤ªåŠåŸºé‡‘ä¼šåˆ›å»ºçš„å®˜æ–¹æµ‹è¯•ç½‘ç»œã€‚å…¶åŠŸèƒ½ç±»ä¼¼äºMainNetã€‚

- **Kovan**ï¼šä¸€ç§ä½¿ç”¨ç§°ä¸ºâ€œæƒå¨è¯æ˜â€( "proof-of-authority")çš„å…±è¯†æ–¹æ³•çš„ç½‘ç»œã€‚è¿™æ„å‘³ç€å®ƒçš„äº¤æ˜“é€šè¿‡é€‰å®šçš„æˆå‘˜è¿›è¡ŒéªŒè¯ï¼Œä»è€Œå¸¦æ¥ä¸€è´¯æ€§çš„å››ç§’çš„é”å®šæ—¶é—´ã€‚æ­¤æµ‹è¯•ç½‘ä¸Šçš„ä»¥å¤ªå¸çš„ä¾›åº”ä¹Ÿå—åˆ°æ§åˆ¶ï¼Œä»¥å‡è½»åƒåœ¾è¿ç§»ï¼ˆæ™ºèƒ½åˆçº¦çš„éƒ¨ç½²æˆ–å‡çº§è¢«ç§°ä¸ºè¿ç§»mitigateï¼‰æ”»å‡»ã€‚

- **Rinkeby**ï¼šä¸€ä¸ªä¹Ÿä½¿ç”¨æƒå¨è¯æ˜çš„æµ‹è¯•ç½‘ï¼Œç”±ä»¥å¤ªåŠåŸºé‡‘ä¼šåˆ›å»ºçš„ã€‚

3. ç§æœ‰/ä¼ä¸šç½‘ç»œ
ä»¥å¤ªç½‘ä¸“ç”¨ç½‘ç»œå…è®¸å„æ–¹å…±äº«æ•°æ®ï¼Œè€Œä¸å…¬å¼€è®¿é—®ã€‚ç§äººåŒºå—é“¾æ˜¯ä»¥ä¸‹é€‰æ‹©çš„ä¸é”™é€‰æ‹©ï¼š

- å…±äº«æ•æ„Ÿæ•°æ®ï¼Œå¦‚åŒ»ç–—ä¿å¥è®°å½•
- ç”±äºè¾ƒå°çš„ç½‘ç»œè§„æ¨¡ï¼Œæ‰©å±•å¯ä»¥å¤„ç†æ›´é«˜çš„è¯»å†™ååé‡

ç§æœ‰ä¼ä¸šåŒºå—é“¾çš„ä¸€ä¸ªä¾‹å­æ˜¯æœ€åˆç”±æ‘©æ ¹å¤§é€šå®ç°çš„[Quorum](https://www.jpmorgan.com/country/US/EN/Quorum) ã€‚ï¼ˆè¯·é˜…è¯»æˆ‘ä»¬çš„[åšå®¢æ–‡ç« ](http://truffleframework.com/tutorials/building-dapps-for-quorum-private-enterprise-blockchains) ï¼Œäº†è§£ä½¿ç”¨Truffleè°ƒè¯•Quorumã€‚ï¼‰

#### åˆ†å¸ƒå¼åº”ç”¨ç¨‹åº(dapp)
ä½¿ç”¨æ™ºèƒ½åˆçº¦è¿›è¡Œå¤„ç†çš„åº”ç”¨ç¨‹åºç§°ä¸ºâ€œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºâ€æˆ–â€œdappsâ€ã€‚è¿™äº›dappsçš„ç”¨æˆ·ç•Œé¢åŒ…æ‹¬ç†Ÿæ‚‰çš„è¯­è¨€ï¼Œå¦‚HTMLã€CSSå’ŒJavaScriptã€‚åº”ç”¨ç¨‹åºæœ¬èº«å¯ä»¥æ‰˜ç®¡åœ¨ä¼ ç»Ÿçš„WebæœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥é©»ç•™åœ¨åˆ†æ•£çš„æ–‡ä»¶æœåŠ¡ï¼ˆå¦‚[Swarm](http://swarm-gateways.net/bzz:/theswarm.eth/) æˆ–[IPFS](http://ipfs.io/) ï¼‰ä¸Šã€‚

é‰´äºä»¥å¤ªåŠåŒºå—é“¾çš„å¥½å¤„ï¼Œdappå¯èƒ½æˆä¸ºè®¸å¤šè¡Œä¸šçš„è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- è®°è´¦  
- é‡‘è  
- ä¾›åº”é“¾  
- æˆ¿åœ°äº§  
- äº¤æ˜“å¸‚åœº  

åˆ›å»ºè‡ªå·±çš„dappï¼Œæµ‹è¯•å®ƒå¹¶å°†å…¶éƒ¨ç½²åˆ°ä½ é€‰æ‹©çš„ä»¥å¤ªåŠç½‘ç»œçš„æœ€ä½³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯ä½¿ç”¨[Truffle](http://truffleframework.com/docs/getting_started/project) ã€‚

### è°ƒè¯•ä¸€ä¸ªæ™ºèƒ½åˆçº¦
[1](http://truffleframework.com/tutorials/debugging-a-smart-contract)  
æœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯[Solidity](https://solidity.readthedocs.io/en/develop/introduction-to-smart-contracts.html) æ–‡æ¡£ä¸­çš„ä¾‹å­ã€‚å¤§çº¦ç›¸å½“äºSolidityçš„hello worldã€‚  

ä¾‹å­çš„ç¨‹åºæºç æ˜¯ï¼š
```solidity
pragma solidity ^0.4.17;

contract SimpleStorage {
  uint myVariable;

  function set(uint x) public {
    myVariable = x;
  }

  function get() constant public returns (uint) {
    return myVariable;
  }
}
```
1.åˆ›å»ºå·¥ä½œç›®å½•; 2.åˆ›å»ºä¸€ä¸ªç©ºçš„Truffleé¡¹ç›®(åœ¨æœ¬æœºçš„/home/vagrant/gethç›®å½•ä¸‹)ï¼š
```
mkdir simple-storage && cd simple-storage
truffle init
```
3.åœ¨`contracts/`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶`Store.sol`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
```
pragma solidity ^0.4.17;

contract SimpleStorage {
  uint myVariable;

  function set(uint x) public {
    myVariable = x;
  }

  function get() constant public returns (uint) {
    return myVariable;
  }
}
```
4. åˆ›å»ºäº†ä¸€ä¸ªå«`SimpleStorage`çš„åˆçº¦ã€‚  
åœ¨`migrations/`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå«`2_deploy_contracts.js`çš„æ–‡ä»¶ï¼ŒåŒ…å«ä¸‹åˆ—å†…å®¹ï¼š
```
var SimpleStorage = artifacts.require("SimpleStorage");

module.exports = function(deployer) {
  deployer.deploy(SimpleStorage);
};
```
è¿™ä¸ªæ–‡ä»¶ç”¨äºå°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ã€‚

5. ç¼–è¯‘åˆçº¦ã€‚æ³¨æ„åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š
```
truffle compile
```
6. æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œè¿è¡Œ`truffle develop`æ¥å¯åŠ¨Truffleå†…ç½®çš„å¼€å‘ç¯å¢ƒï¼ˆè¿™æ˜¯Truffleå†…ç½®çš„åŒºå—é“¾æ¨¡æ‹Ÿç¯å¢ƒï¼Œå¯ç”¨äºåˆçº¦çš„è°ƒè¯•ã€‚åœ¨ä¸‹ä¸€ä¸ªæ•™ç¨‹ä¸­å°†ä¼šä½¿ç”¨ä¸€ä¸ªå«Ganacheçš„åŒºå—é“¾æ¨¡æ‹Ÿç¯å¢ƒï¼‰ï¼š
```
truffle develop
```
å±å¹•ä¸Šä¼šæ˜¾ç¤ºä¸€äº›é¢„ç½®çš„è´¦æˆ·å’Œç§é’¥ä¿¡æ¯ï¼Œç„¶åè¿›å…¥`truffle(develop)>`æç¤ºç¬¦ã€‚åœ¨è¿™ä¸ªtruffleå‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤å°†åˆçº¦éƒ¨ç½²åˆ°åŒºå—é“¾ï¼š
```
truffle(develop)> migrate
```
#### ä¸è¿™ä¸ªåŸºç¡€æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’
é€šè¿‡`truffle develop`æ™ºèƒ½åˆçº¦è¢«éƒ¨ç½²åˆ°äº†ä¸€ä¸ªæµ‹è¯•ç½‘ç»œä¸­ï¼Œè¿™å°†è¿›å…¥ä¸€ä¸ªç±»ä¼¼[Ganache](http://truffleframework.com/ganache) çš„[æ§åˆ¶å°](http://truffleframework.com/docs/getting_started/console) ã€‚Ganacheæ˜¯ä¸“é—¨ä¸ºTruffleå®ç°çš„å¼€å‘ç”¨åŒºå—é“¾ã€‚  

*æ³¨æ„ï¼šå¯èƒ½ä½ ç–‘æƒ‘ä¸ºå•¥æˆ‘ä»¬ä¸éœ€è¦é€šè¿‡æŒ–çŸ¿æ¥ç¡®ä¿äº¤æ˜“å®‰å…¨ï¼ŒTruffleå¼€å‘æ§åˆ¶å°å·²ç»ä¸ºæˆ‘ä»¬åšå¥½äº†è¿™äº›ã€‚å¦‚æœä½¿ç”¨ä¸€ä¸ªä¸åŒçš„ç½‘ç»œï¼Œä½ å¯èƒ½éœ€è¦é€šè¿‡æŒ–çŸ¿ç¡®ä¿äº¤æ˜“æäº¤åˆ°åŒºå—é“¾ã€‚* 

1. åœ¨`trffle develop`å·¥ä½œå°ä¸­è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼š
```
SimpleStorage.deployed().then(function(instance){return instance.get.call();}).then(function(value){return value.toNumber()});
```
è¿™ä¸ªå‘½ä»¤è®¿é—®SimpleStorageåˆçº¦ï¼Œè°ƒç”¨`get()`å‡½æ•°ï¼Œè¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºæ•°å­—ï¼Œæ˜¾ç¤ºä¸º`0`ã€‚*Solidityçš„æ•´æ•°å˜é‡çš„åˆå§‹å€¼æ˜¯0*ï¼Œè¿™ä¸åŒäºå…¶ä»–è¯­è¨€ï¼Œå¯èƒ½ä¼š`NULL`å’Œ`undefined`ã€‚  

2. ç°åœ¨åœ¨åˆçº¦ä¸Šè¿è¡Œä¸€ä¸ªäº¤æ˜“ã€‚
```
SimpleStorage.deployed().then(function(instance){return instance.set(4);});
```
è¿™ä¼šå°†å˜é‡è®¾ç½®ä¸º`4`ã€‚æç¤ºä¸­ä¼šæ˜¾ç¤ºäº¤æ˜“ID(`tx`å’Œ`transactionHash`)ã€‚ä¸‹é¢çš„è°ƒè¯•ä¸­ä¼šç”¨åˆ°è¿™ä¸ªäº¤æ˜“IDã€‚

3. ä½¿ç”¨`get()`å‡½æ•°æ¥æ£€æŸ¥ä¿®æ”¹åçš„å€¼ï¼š
```
SimpleStorage.deployed().then(function(instance){return instance.get.call();}).then(function(value){return value.toNumber()});
4
```
#### å•æ­¥æ‰§è¡Œ
Truffle Developæ¯”è¾ƒå‰å®³çš„åœ°æ–¹æ˜¯æ”¯æŒå•æ­¥è°ƒè¯•ã€‚  
æ•…æ„åœ¨åŸæ¥çš„åˆçº¦ä¸­å¢åŠ æ­»å¾ªç¯ã€‚å°†`set()`å‡½æ•°ä¿®æ”¹ä¸ºï¼š
```
function set(uint x) public {
  while(true) {
    myVariable = x;
  }
}
```

1. åœ¨Truffleå¼€å‘æ§åˆ¶å°ä¸­ï¼Œæ›´æ–°åˆçº¦ï¼š
```
migrate --reset
```
è¿™å°†è§¦å‘ç¼–è¯‘å’Œè¿ç§»ã€‚
2. ä¸ºäº†æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ï¼Œå¯ä»¥å¦å¤–å¯åŠ¨ä¸€ä¸ªæ§åˆ¶å°ä¸“é—¨æ˜¾ç¤ºæ—¥å¿—ã€‚åœ¨å¦å¤–çš„ç»ˆç«¯ä¸­æ‰§è¡Œï¼š
```
truffle develop --log
```
3. æ‰§è¡Œ`set()`å‡½æ•°ï¼š
```
SimpleStorage.deployed().then(function(instance){return instance.set(4);});
Error: VM Exception while processing transaction: out of gas
```
è¿™æ˜¯å› ä¸ºæ­»å¾ªç¯è€—å°½äº†ç‡ƒæ–™(gas)ï¼Œå¯¼è‡´æŠ¥å‘Š`out of gas`é”™è¯¯ã€‚  


4. é€šè¿‡è°ƒè¯•å®šä½bugä½ç½®ã€‚è°ƒè¯•çš„å‘½ä»¤æ ¼å¼æ˜¯`debug <Transaction ID>`ã€‚
```
debug 0xe493340792ab92b95ac40e43dca6bc88fba7fd67191989d59ca30f79320e883f
```
æ³¨æ„æŠŠäº¤æ˜“IDæ›¿æ¢æˆä½ è‡ªå·±çš„ã€‚
çœ‹åˆ°çš„æç¤ºå¦‚ä¸‹ï¼š
```
   Gathering transaction data...

   Addresses affected:
     0x377bbcae5327695b32a1784e0e13bedc8e078c9c - SimpleStorage

   Commands:
   (enter) last command entered (step next)
   (o) step over, (i) step into, (u) step out, (n) step next
   (;) step instruction, (p) print instruction, (h) print this help, (q) quit

   Store.sol | 0x377bbcae5327695b32a1784e0e13bedc8e078c9c:

   1: pragma solidity ^0.4.17;
   2:
   3: contract SimpleStorage {
      ^^^^^^^^^^^^^^^^^^^^^^^

   debug(develop:0xe4933407...)>
```
ä¸åœæŒ‰å›è½¦é”®å¯ä»¥è¿›è¡Œå•æ­¥æ‰§è¡Œåˆçº¦ã€‚ç›´åˆ°æ‰¾åˆ°bugä½ç½®ã€‚

### ä»¥å¤ªåŠå® ç‰©å•†åº—
[è‹±æ–‡åŸæ–‡](http://truffleframework.com/tutorials/pet-shop)  
æœ¬æ•™ç¨‹å°†å¸¦æ‚¨å®Œæˆç¬¬ä¸€ä¸ªdappâ€”â€”ä¸€ä¸ªå® ç‰©å•†åº—çš„æ”¶å…»è·Ÿè¸ªç³»ç»Ÿï¼

æœ¬æ•™ç¨‹é¢å‘é‚£äº›å…·æœ‰ä»¥å¤ªåŠå’Œæ™ºèƒ½åˆçº¦åŸºç¡€çŸ¥è¯†çš„äººå‘˜ï¼Œä»–ä»¬å…·æœ‰HTMLå’ŒJavaScriptçš„ä¸€äº›çŸ¥è¯†ï¼Œä½†å¯¹äºdappsæ˜¯æ–°æ‰‹ã€‚

*æ³¨æ„ï¼šå¯¹äºä»¥å¤ªåŠçš„åŸºç¡€çŸ¥è¯†ï¼Œè¯·åœ¨ç»§ç»­ä¹‹å‰é˜…è¯»Truffleçš„[ä»¥å¤ªåŠæ¦‚è¿°](https://github.com/wbwangk/wbwangk.github.io/wiki/Ethereum#%E4%BB%A5%E5%A4%AA%E5%9D%8A%E6%A6%82%E8%BF%B0) ã€‚*

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ¶µç›–ï¼š

- å»ºç«‹å¼€å‘ç¯å¢ƒ  
- ä½¿ç”¨Truffle Boxåˆ›å»ºTruffleé¡¹ç›®  
- å†™æ™ºèƒ½åˆçº¦  
- ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦  
- æµ‹è¯•æ™ºèƒ½åˆçº¦  
- åˆ›å»ºç”¨æˆ·ç•Œé¢ä»¥ä¸æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’  
- åœ¨æµè§ˆå™¨ä¸­ä¸dappäº¤äº’  

#### èƒŒæ™¯
çš®ç‰¹å® ç‰©åº—çš„çš®ç‰¹Â·æ–¯åå¾·éš†ï¼ˆPete Scandlonï¼‰æœ‰æ„ä½¿ç”¨ä»¥å¤ªåŠä½œä¸ºä¸€ç§æœ‰æ•ˆçš„æ–¹å¼æ¥å¤„ç†å® ç‰©çš„æ”¶å…»ã€‚å•†åº—åœ¨ç»™å®šçš„æ—¶é—´æœ‰16ä¸ªå® ç‰©çš„ç©ºé—´ï¼Œä»–ä»¬å·²ç»æœ‰ä¸€ä¸ªå® ç‰©æ•°æ®åº“ã€‚ä½œä¸ºä¸€ä¸ªæ¦‚å¿µçš„åˆæ­¥è¯æ˜ï¼Œ**Peteå¸Œæœ›çœ‹åˆ°ä¸€ä¸ªå°†ä»¥å¤ªåŠåœ°å€ä¸å® ç‰©å…³è”èµ·æ¥çš„dapp**ã€‚

å°†æä¾›ç½‘ç«™ç»“æ„å’Œæ ·å¼ã€‚**æˆ‘ä»¬çš„å·¥ä½œæ˜¯ä¸ºå…¶ä½¿ç”¨ç¼–å†™æ™ºèƒ½åˆåŒå’Œå‰ç«¯é€»è¾‘**ã€‚

#### å»ºç«‹å¼€å‘ç¯å¢ƒ
å‡å®šgitã€nodejsã€npmå·²ç»è£…å¥½ã€‚å®‰è£…Truffleï¼š
```
npm install -g truffle
```
æ‰§è¡Œ`truffle version`æ¥éªŒè¯Truffleæ˜¯å¦å®‰è£…å¥½ã€‚
æˆ‘ä»¬ä¹Ÿå°†ä½¿ç”¨[Ganache](http://truffleframework.com/ganache) ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ªäººåŒºå—é“¾ï¼Œå¯ç”¨äºéƒ¨ç½²åˆçº¦ã€å¼€å‘åº”ç”¨ç¨‹åºå’Œè¿è¡Œæµ‹è¯•ã€‚æ‚¨å¯ä»¥é€šè¿‡å¯¼èˆªåˆ°[è¿™é‡Œ](http://truffleframework.com/ganache) ä¸‹è½½Ganache ã€‚

*æ³¨æ„ï¼šå¦‚æœæ‚¨åœ¨æ²¡æœ‰å›¾å½¢ç•Œé¢çš„ç¯å¢ƒä¸­å¼€å‘ï¼Œè¿˜å¯ä»¥ä½¿ç”¨Truffle Developï¼Œå³Truffleçš„å†…ç½®ä¸ªäººåŒºå—é“¾ä»£æ›¿Ganacheã€‚æ‚¨å°†éœ€è¦æ›´æ”¹ä¸€äº›è®¾ç½®ï¼ˆä¾‹å¦‚åŒºå—é“¾è¿è¡Œçš„ç«¯å£ï¼‰ï¼Œä»¥ä¾¿é€‚åº”Truffle Developæ•™ç¨‹ã€‚*

#### ä½¿ç”¨truffleåˆ›å»ºé¡¹ç›®
æœ¬æ•™ç¨‹ä½¿ç”¨äº†ä¸€ä¸ªç‰¹æ®Šçš„Truffle Box `pet-shop`ï¼ŒåŒ…æ‹¬åŸºæœ¬çš„é¡¹ç›®ç»“æ„ä»¥åŠç”¨æˆ·ç•Œé¢çš„ä»£ç ã€‚

1. åˆ›å»ºå·¥ä½œç›®å½•ï¼›2. ä¸‹è½½`pet-shop`(åœ¨æœ¬æœºçš„~/gethç›®å½•ä¸‹)
```
mkdir pet-shop-tutorial && cd pet-shop-tutorial
truffle unbox pet-shop
```
*æ³¨ï¼šTruffleå¯ä»¥é€šè¿‡å‡ ç§ä¸åŒçš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ã€‚å¦ä¸€ä¸ªæœ‰ç”¨çš„åˆå§‹åŒ–å‘½ä»¤æ˜¯truffle initåˆ›å»ºä¸€ä¸ªç©ºçš„Truffleé¡¹ç›®ï¼Œä¸åŒ…å«ç¤ºä¾‹åˆçº¦ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…[åˆ›å»ºé¡¹ç›®](http://truffleframework.com/docs/getting_started/project) çš„æ–‡æ¡£ã€‚*

ã€ç›®å½•ç»“æ„ã€‘
é»˜è®¤çš„Truffleç›®å½•ç»“æ„åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

- `contracts/`ï¼šåŒ…å«æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦çš„Solidityæºæ–‡ä»¶ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé‡è¦çš„åˆçº¦Migrations.solï¼Œæˆ‘ä»¬ç¨åå†è°ˆã€‚

- `migrations/`ï¼šTruffleä½¿ç”¨è¿ç§»ç³»ç»Ÿæ¥å¤„ç†æ™ºèƒ½åˆåŒéƒ¨ç½²ã€‚è¿ç§»æ˜¯è¿½è¸ªå˜åŒ–çš„é¢å¤–ç‰¹æ®Šæ™ºèƒ½åˆçº¦ã€‚

- `test/`ï¼šåŒ…å«æˆ‘ä»¬æ™ºèƒ½åˆçº¦çš„JavaScriptå’ŒSolidityæµ‹è¯•

- `truffle.js`ï¼šTruffleé…ç½®æ–‡ä»¶

`pet-shop`Truffle Boxæœ‰é¢å¤–çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œä½†æˆ‘ä»¬ç°åœ¨è¿˜ä¸æ‹…å¿ƒè¿™äº›ã€‚

#### ç¼–å†™æ™ºèƒ½åˆçº¦
æˆ‘ä»¬é€šè¿‡ç¼–å†™å¤„ç†åå°é€»è¾‘å’Œå­˜å‚¨çš„æ™ºèƒ½åˆçº¦æ¥å¼€å§‹æˆ‘ä»¬çš„dappã€‚

1. åœ¨`contracts/`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå«`Adoption.sol`çš„æ–‡ä»¶ã€‚2. æ·»åŠ ä¸‹åˆ—å†…å®¹ï¼š
```solidity
pragma solidity ^0.4.17;

contract Adoption {

}
```
- `pragma`å‘½ä»¤æ„å‘³ç€è¿™æ˜¯â€œåªæœ‰ç¼–è¯‘å™¨å…³å¿ƒçš„é™„åŠ ä¿¡æ¯â€ï¼Œæ’å…¥ç¬¦å·(^)è¡¨ç¤ºä¸èƒ½ä½äºè¿™ä¸ªç‰ˆæœ¬å·ã€‚  
- å°±åƒJavaScriptæˆ–PHPï¼Œè¯­å¥ç”¨åˆ†å·ç»“æŸã€‚  

ã€åˆ›å»ºå˜é‡ã€‘
Solidityæ˜¯ä¸€ç§é™æ€ç±»å‹çš„è¯­è¨€ï¼Œæ„å‘³ç€åƒå­—ç¬¦ä¸²ï¼Œæ•´æ•°å’Œæ•°ç»„ç­‰æ•°æ®ç±»å‹å¿…é¡»è¢«å®šä¹‰ã€‚**Solidityæœ‰ä¸€ä¸ªç§°ä¸ºåœ°å€çš„ç‹¬ç‰¹ç±»å‹**ã€‚åœ°å€æ˜¯ä»¥å¤ªåŠåœ°å€ï¼Œå­˜å‚¨ä¸º20ä¸ªå­—èŠ‚çš„å€¼ã€‚ä»¥å¤ªåŠåŒºå—é“¾ä¸Šçš„æ¯ä¸ªè´¦æˆ·å’Œæ™ºèƒ½åˆçº¦éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼Œå¹¶å¯ä»¥é€šè¿‡æ­¤åœ°å€å‘é€å’Œæ¥æ”¶ä»¥å¤ªå¸ã€‚
1. ä¹‹ååœ¨ä¸‹ä¸€è¡Œæ·»åŠ ä»¥ä¸‹å˜é‡`contract Adoption {`ã€‚
```
address[16] public adopters;
```
æ³¨æ„äº‹é¡¹ï¼š

- æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼š`adopters`ã€‚è¿™æ˜¯ä¸€ä¸ªä»¥å¤ªåŠåœ°å€**æ•°ç»„**ã€‚æ•°ç»„åŒ…å«ä¸€ä¸ªç±»å‹ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªå›ºå®šçš„æˆ–å¯å˜çš„é•¿åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹æ˜¯åœ°å€`address`ï¼Œé•¿åº¦æ˜¯`16`ã€‚

- ä½ å¯èƒ½å·²æ³¨æ„åˆ°`adopters`æ˜¯å…¬å…±çš„ã€‚**å…¬å…±**å˜é‡å…·æœ‰è‡ªåŠ¨getteræ–¹æ³•ï¼Œä½†æ˜¯åœ¨æ•°ç»„çš„æƒ…å†µä¸‹ï¼Œé”®æ˜¯å¿…éœ€çš„å¹¶ä¸”åªä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚ç¨åï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è¿”å›æ•´ä¸ªæ•°ç»„ï¼Œä¾›æˆ‘ä»¬çš„ç”¨æˆ·ç•Œé¢ä½¿ç”¨ã€‚

#### ä½ çš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼šæ”¶å…»ä¸€ä¸ªå® ç‰©
è®©æˆ‘ä»¬å…è®¸ç”¨æˆ·åšå‡ºæ”¶å…»è¯·æ±‚ã€‚

åœ¨ä¸Šé¢è®¾ç½®çš„å˜é‡å£°æ˜ä¹‹åï¼Œå°†ä¸‹é¢çš„å‡½æ•°æ·»åŠ åˆ°æ™ºèƒ½åˆçº¦ä¸­ã€‚
```
// Adopting a pet
function adopt(uint petId) public returns (uint) {
  require(petId >= 0 && petId <= 15);

  adopters[petId] = msg.sender;

  return petId;
}
```
æ³¨æ„äº‹é¡¹ï¼š

- åœ¨Solidityä¸­ï¼Œå¿…é¡»æŒ‡å®šå‡½æ•°å‚æ•°å’Œè¾“å‡ºçš„ç±»å‹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è¾“å…¥`petId`ï¼ˆæ•´æ•°ï¼‰å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ã€‚

- æˆ‘ä»¬æ­£åœ¨æ£€æŸ¥ç¡®ä¿`petId`åœ¨æˆ‘ä»¬`adopters`æ•°ç»„çš„èŒƒå›´å†…ã€‚Solidityæ•°ç»„ç´¢å¼•ä¸º0ï¼Œå› æ­¤IDå€¼å°†éœ€è¦åœ¨0åˆ°15ä¹‹é—´ã€‚æˆ‘ä»¬ä½¿ç”¨`require()`è¯­å¥æ¥ç¡®ä¿IDåœ¨èŒƒå›´å†…ã€‚

- å¦‚æœIDåœ¨èŒƒå›´å†…ï¼Œå°±æ·»åŠ è°ƒç”¨è€…åœ°å€åˆ°adoptersæ•°ç»„ã€‚*è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„äººæˆ–æ™ºèƒ½åˆçº¦çš„åœ°å€ç”¨`msg.sender`è¡¨ç¤º*ã€‚

- æœ€åï¼Œæˆ‘ä»¬è¿”å›`petId`ä»¥ä¾¿æä¾›ä¸€ä¸ªç¡®è®¤ã€‚

#### ä½ çš„ç¬¬äºŒä¸ªå‡½æ•°ï¼šè·å–æ”¶å…»è€…
å¦‚ä¸Šæ‰€è¿°ï¼Œæ•°ç»„getteråªä»ç»™å®šçš„é”®è¿”å›ä¸€ä¸ªå•ä¸€çš„å€¼ã€‚æˆ‘ä»¬çš„UIéœ€è¦æ›´æ–°æ‰€æœ‰çš„å® ç‰©æ”¶å…»çŠ¶æ€ï¼Œä½†æ˜¯åš16ä¸ªAPIè°ƒç”¨å¹¶ä¸ç†æƒ³ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸‹ä¸€æ­¥æ˜¯ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è¿”å›æ•´ä¸ªæ•°ç»„ã€‚

åœ¨æˆ‘ä»¬ä¸Šé¢æ·»åŠ çš„`adopt()`å‡½æ•°ä¹‹åï¼Œæ·»åŠ ä»¥ä¸‹å‡½æ•°`getAdopters()`åˆ°æ™ºèƒ½åˆçº¦ï¼š
```
// Retrieving the adopters
function getAdopters() public view returns (address[16]) {
  return adopters;
}
```
å› ä¸º`adopters`å·²ç»å£°æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è¿”å›å®ƒã€‚ç¡®ä¿æŒ‡å®šè¿”å›ç±»å‹ï¼ˆåœ¨è¿™é‡Œï¼Œç±»å‹ä¸º`adopters`ï¼‰ä¸º`address[16]`ã€‚

#### ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆçº¦
ç°åœ¨æˆ‘ä»¬å·²ç»ç¼–å†™äº†æ™ºèƒ½åˆçº¦ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤æ˜¯ç¼–è¯‘å’Œè¿ç§»å®ƒã€‚

Truffleæœ‰ä¸€ä¸ªå†…ç½®çš„å¼€å‘è€…æ§åˆ¶å°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºTruffle Developï¼Œå®ƒç”Ÿæˆä¸€ä¸ªå¼€å‘åŒºå—é“¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥æµ‹è¯•éƒ¨ç½²åˆçº¦ã€‚å®ƒè¿˜èƒ½å¤Ÿç›´æ¥ä»æ§åˆ¶å°è¿è¡ŒTruffleå‘½ä»¤ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­æˆ‘ä»¬å°†ä½¿ç”¨Truffle Developæ‰§è¡Œæˆ‘ä»¬åˆçº¦ä¸­çš„å¤§éƒ¨åˆ†æ“ä½œã€‚

ã€ç¼–è¯‘ã€‘
Solidityæ˜¯ä¸€ç§ç¼–è¯‘è¯­è¨€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†Solidityç¼–è¯‘ä¸ºç”¨äºä»¥å¤ªåŠè™šæ‹Ÿæœºï¼ˆEVMï¼‰æ‰§è¡Œçš„å­—èŠ‚ç ã€‚æŠŠå®ƒçœ‹ä½œæ˜¯å°†æˆ‘ä»¬äººç±»å¯è¯»çš„Solidityç¿»è¯‘æˆEVMæ‰€ç†è§£çš„ä¸œè¥¿ã€‚

1. åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œåœ¨dappçš„æ ¹ç›®å½•ä¸­è¾“å…¥ï¼š
```
truffle compile
```

ã€è¿ç§»ã€‘
ç°åœ¨å·²ç»æˆåŠŸç¼–è¯‘äº†åˆçº¦ï¼Œç°åœ¨æ˜¯æ—¶å€™å°†å®ƒä»¬è¿ç§»åˆ°åŒºå—é“¾äº†ï¼

è¿ç§»æ˜¯ä¸€ä¸ªéƒ¨ç½²è„šæœ¬ï¼Œæ—¨åœ¨æ”¹å˜åº”ç”¨ç¨‹åºåˆçº¦çš„çŠ¶æ€ï¼Œå°†å…¶ä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªçŠ¶æ€ã€‚å¯¹äºç¬¬ä¸€æ¬¡è¿ç§»ï¼Œæ‚¨å¯èƒ½åªæ˜¯éƒ¨ç½²æ–°çš„ä»£ç ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå…¶ä»–è¿ç§»å¯èƒ½ä¼šç§»åŠ¨æ•°æ®æˆ–æ›¿æ¢æˆä¸€ä¸ªæ–°çš„åˆçº¦ã€‚

*æ³¨æ„ï¼šåœ¨[Truffleæ–‡æ¡£](http://truffleframework.com/docs/getting_started/migrations) ä¸­äº†è§£æ›´å¤šå…³äºè¿ç§»çš„ä¿¡æ¯*ã€‚

ä½ ä¼šåœ¨`migrations/`ç›®å½•çœ‹åˆ°ä¸€ä¸ªJavaScriptæ–‡ä»¶ï¼š`1_initial_migration.js`ã€‚è¿™å°†å¤„ç†éƒ¨ç½²`Migrations.sol`åˆçº¦ä»¥è§‚å¯Ÿåç»­çš„æ™ºèƒ½åˆåŒè¿ç§»ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬æœªæ¥ä¸ä¼šåŒé‡è¿ç§»ä¸å˜çš„åˆåŒã€‚

ç°åœ¨æˆ‘ä»¬å‡†å¤‡åˆ›å»ºæˆ‘ä»¬è‡ªå·±çš„è¿ç§»è„šæœ¬ã€‚

1. åœ¨`migrations/`ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º`2_deploy_contracts.js`çš„æ–°æ–‡ä»¶ã€‚

2. å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°`2_deploy_contracts.js`æ–‡ä»¶ä¸­ï¼š
```
var Adoption = artifacts.require("Adoption");

module.exports = function(deployer) {
  deployer.deploy(Adoption);
};
```
3. åœ¨æˆ‘ä»¬å¯ä»¥å°†åˆçº¦è¿ç§»åˆ°åŒºå—é“¾ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿è¡ŒåŒºå—é“¾ã€‚åœ¨åŸæ–‡ä¸­ä½¿ç”¨çš„æ˜¯å›¾å½¢ç•Œé¢çš„[Ganache](http://truffleframework.com/ganache) ã€‚å¯¹äºæ²¡æœ‰å›¾å½¢ç•Œé¢çš„æœåŠ¡å™¨ç¯å¢ƒï¼Œä½¿ç”¨[ganache-cli](https://github.com/trufflesuite/ganache-cli/blob/master/README.md)ï¼ˆä»¥å‰å«testrpcï¼‰ã€‚  

å®‰è£…ganache-cli: `npm install -g ganache-cli`ã€‚

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å¯åŠ¨ganache-cliï¼š
```
$ ganache-cli
...
Listening  on localhost:8545
```
è¿™æ ·å°±åœ¨8545ç«¯å£ä¸Šå¯åŠ¨äº†ä¸€ä¸ªä»¥å¤ªåŠçš„å®¢æˆ·ç«¯æ¨¡æ‹Ÿç¨‹åºã€‚  
å±å¹•ä¸Šä¼šæ˜¾ç¤ºä¸€äº›ganache-cliç”¨äºæµ‹è¯•çš„å†…ç½®è´¦æˆ·åœ°å€å’Œç§é’¥ã€‚æœ€åæ˜¾ç¤ºäº†é’±åŒ…ä¿¡æ¯ï¼Œå…¶ä¸­çš„Mnemonicæ˜¯12ä¸ªå­—ç¬¦ä¸²ã€‚æ ¹æ®è¿™12ä¸ªå­—ç¬¦ä¸²å¯ä»¥é‡å»ºé’±åŒ…ï¼Œå¾ˆé‡è¦ç›¸å½“äºç§é’¥ã€‚

4. å°†åˆçº¦è¿ç§»åˆ°åŒºå—é“¾ã€‚
```
$ truffle migrate
Using network 'development'.
...
```
5. åœ¨Ganache-cliä¸­ï¼Œæ˜¾ç¤ºäº†æ•´ä¸ªè¿ç§»è¿‡ç¨‹ï¼ŒåŒºå—å·ä»0å¼€å§‹å¢åŠ åˆ°äº†4ã€‚ä¸åŒäºGanacheçš„å›¾å½¢ç•Œé¢å¯ä»¥çœ‹åˆ°ä»¥å¤ªå¸çš„ä½™é¢ï¼Œä»è€Œè§‚å¯Ÿåˆ°è¿ç§»çš„äº¤æ˜“æˆæœ¬ã€‚ä¹‹åæƒ³åŠæ³•ç”¨å…¶ä»–æ–¹å¼è§‚å¯Ÿè´¦æˆ·ä½™é¢çš„å˜åŒ–ã€‚

#### æµ‹è¯•æ™ºèƒ½åˆçº¦
åœ¨æ™ºèƒ½åˆçº¦æµ‹è¯•æ–¹é¢ï¼ŒTruffleéå¸¸çµæ´»ï¼Œå› ä¸ºæµ‹è¯•å¯ä»¥ç”¨JavaScriptæˆ–Solidityç¼–å†™ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œå°†åœ¨Solidityä¸­ç¼–å†™æˆ‘ä»¬çš„æµ‹è¯•ã€‚

ï¼ˆæ•´ä¸ªæµ‹è¯•ä»£ç çš„ç¼–å†™è¿‡ç¨‹çœç•¥ï¼Œè¯·å‚è€ƒåŸæ–‡ã€‚ï¼‰

ã€è¿è¡Œæµ‹è¯•ã€‘
1. åœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œï¼š
```
truffle test
```
2. å¦‚æœæ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ§åˆ¶å°è¾“å‡ºï¼š
```
...
  3 passing (670ms)
```
å¦‚æœåœ¨ganache-cliçš„ç»ˆç«¯çª—å£ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ï¼ŒåŒºå—é«˜åº¦ä»4é•¿åˆ°äº†14ã€‚  

#### åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç•Œé¢ä¸æ™ºèƒ½åˆçº¦äº¤äº’
ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†æ™ºèƒ½åˆçº¦ï¼Œå°†å…¶éƒ¨ç½²åˆ°æˆ‘ä»¬çš„æœ¬åœ°æµ‹è¯•åŒºå—é“¾ä¸­ï¼Œå¹¶ç¡®è®¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å°ä¸å®ƒè¿›è¡Œäº¤äº’ï¼Œç°åœ¨æ˜¯æ—¶å€™åˆ›å»ºä¸€ä¸ªUIï¼Œè®©Peteæœ‰ä¸€äº›ä¸œè¥¿å¯ä»¥ç”¨äºä»–çš„å® ç‰©åº—ï¼

åŒ…æ‹¬åœ¨`pet-shop`Truffle Boxæ˜¯åº”ç”¨ç¨‹åºçš„å‰ç«¯ä»£ç ã€‚è¯¥ä»£ç å­˜åœ¨äºè¯¥`src/`ç›®å½•ä¸­ã€‚

å‰ç«¯ä¸ä½¿ç”¨æ„å»ºç³»ç»Ÿï¼ˆwebpackï¼Œgruntç­‰ï¼‰å°½å¯èƒ½ç®€å•åœ°å¼€å§‹ã€‚è¯¥åº”ç”¨ç¨‹åºçš„ç»“æ„å·²ç»åœ¨é‚£é‡Œ; æˆ‘ä»¬å°†å¡«è¡¥ä»¥å¤ªåŠç‰¹æœ‰çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥å°†è¿™äº›çŸ¥è¯†åº”ç”¨äºæ‚¨è‡ªå·±çš„å‰ç«¯å¼€å‘ã€‚
ï¼ˆåç•¥ï¼‰

#### å®‰è£…å’Œé…ç½®MetaMask
[MetaMask](https://metamask.io/) æ˜¯Chromeå’ŒFireboxçš„æµè§ˆå™¨æ‰©å±•ï¼Œæ˜¯ä¸€ä¸ªä»¥å¤ªåŠé’±åŒ…ã€‚é€šè¿‡MetaMaskå¯ä»¥è¿æ¥ä¸Šä»¥å¤ªåŠä¸»ç½‘æˆ–æµ‹è¯•ç½‘è¿›è¡Œä»¥å¤ªåŠè´¦æˆ·çš„ç®¡ç†ï¼ŒåŒ…æ‹¬æŸ¥çœ‹ä½™é¢ã€è½¬è´¦ç­‰ï¼Œæ”¯æŒä»£å¸ã€‚åœ¨æœ¬æ–‡çš„[å…¶å®ƒç« èŠ‚](https://github.com/wbwangk/wbwangk.github.io/wiki/Ethereum#%E5%8F%91%E8%A1%8C%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BB%A5%E5%A4%AA%E5%9D%8Aerc20-token) ä¸­ä¹Ÿè®²åˆ°äº†MetaMaskçš„ä½¿ç”¨ã€‚  

1. åœ¨æµè§ˆå™¨ä¸­å®‰è£…MetaMaskï¼ˆéœ€è¦å¢™ï¼‰ã€‚2-4. ç•¥

5.6. åœ¨MetaMaskæµ®åŠ¨æ¡†ä¸­ï¼Œç‚¹å‡»**Import Existing DEN**ã€‚è¾“å…¥ganache-cliåˆšè¿è¡Œæ—¶æç¤ºçš„12ä¸ªè‹±æ–‡å•è¯ã€‚
![](http://truffleframework.com/tutorials/images/pet-shop/metamask-initial.png)  
åœ¨ä¸‹é¢è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼Œç‚¹å‡»**OK**ã€‚

7. åœ¨MetaMaskæµ®åŠ¨æ¡†çš„å·¦ä¸Šè§’ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©**Custom RPC**ã€‚

8. è¾“å…¥åœ°å€`http://127.0.0.1:8545`ï¼Œç‚¹**Save**æŒ‰é’®ã€‚è¿™é‡Œçš„ç«¯å£å·å’ŒåŸæ–‡ä¸ä¸€æ ·ã€‚æˆ‘è¿™é‡Œganache-cliå¯åŠ¨æ—¶çš„é»˜è®¤ç«¯å£æ˜¯8545ï¼Œè€Œä¸æ˜¯7545ã€‚  
ä¸‹æ‹‰æ¡†ä¸Šçš„ç½‘ç»œåç§°åˆ‡æ¢æˆäº†"Private Network"ã€‚

9. ç‚¹ä¸€ä¸‹"Settings"å·¦ä¾§çš„é»‘è‰²ç®­å¤´å›åˆ°è´¦æˆ·é¡µé¢ã€‚ganache-cliä¸ºæ¯ä¸ªè´¦æˆ·è®¾å®šçš„ä»¥å¤ªå¸åˆå§‹å€¼æ˜¯100ã€‚ä½ ä¼šæ³¨æ„åˆ°å®ƒåœ¨ç¬¬ä¸€ä¸ªè´¦æˆ·ä¸Šç¨å¾®å°‘ä¸€äº›ï¼Œå› ä¸ºå½“åˆåŒæœ¬èº«è¢«éƒ¨ç½²æ—¶ä»¥åŠæµ‹è¯•è¿è¡Œæ—¶ä½¿ç”¨äº†ä¸€äº›ç‡ƒæ–™ã€‚
![](http://truffleframework.com/tutorials/images/pet-shop/metamask-account1.png) 

#### å®‰è£…å’Œé…ç½®lite-server
æˆ‘ä»¬ç°åœ¨å¯ä»¥å¯åŠ¨ä¸€ä¸ªæœ¬åœ°webæœåŠ¡å™¨å¹¶ä½¿ç”¨dappã€‚æˆ‘ä»¬ä½¿ç”¨`lite-server`åº“æ¥æœåŠ¡äºé™æ€æ–‡ä»¶ã€‚è¿™ä¸ª`lite-server`å·²ç»åŒ…å«åœ¨`pet-shop`Truffle Boxä¸­ï¼Œä½†è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒå¦‚ä½•å·¥ä½œçš„ã€‚

1. æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`bs-config.json`ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹åˆ—å†…å®¹ï¼š
```
{
  "server": {
    "baseDir": ["./src", "./build/contracts"]
  }
}
```
è¿™å‘Šè¯‰`lite-server`å“ªäº›æ–‡ä»¶åŒ…å«åœ¨æˆ‘ä»¬çš„åŸºæœ¬ç›®å½•ä¸­ã€‚æˆ‘ä»¬ä¸ºç½‘ç«™æ–‡ä»¶æ·»åŠ `./src`ç›®å½•ï¼Œä¸ºåˆçº¦å·¥ä»¶æ·»åŠ `./build/contracts`ç›®å½•ã€‚

æˆ‘ä»¬è¿˜åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`package.json`æ–‡ä»¶ä¸­çš„`scripts`å¯¹è±¡æ·»åŠ äº†ä¸€ä¸ª`dev`å‘½ä»¤ã€‚è¯¥`scripts`å¯¹è±¡å…è®¸æˆ‘ä»¬å°†æ§åˆ¶å°å‘½ä»¤åˆ«åä¸ºå•ä¸ªnpmå‘½ä»¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªæ˜¯åšä¸€ä¸ªå•ä¸€çš„å‘½ä»¤ï¼Œä½†å¯èƒ½æœ‰æ›´å¤æ‚çš„é…ç½®ã€‚è¿™æ˜¯ä½ çš„åº”è¯¥çœ‹èµ·æ¥åƒï¼š
```
"scripts": {
  "dev": "lite-server",
  "test": "echo \"Error: no test specified\" && exit 1"
},
```
è¿™å‘Šè¯‰npmï¼Œå½“æˆ‘ä»¬åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œ`npm run dev`æ—¶è¿è¡Œæœ¬åœ°å®‰è£…çš„`lite-server`ã€‚

1. å¯åŠ¨æœ¬åœ°webæœåŠ¡å™¨ï¼š
```
npm run dev
```
æŒ‰è¯´devæœåŠ¡å™¨ä¼šè¿è¡Œå¹¶è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæ–°æµè§ˆå™¨æ ‡ç­¾é¡µæ¥å±•ç°ä½ çš„dappã€‚ä½†æˆ‘è¿è¡Œçš„ubuntu16æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œåªæ˜¯åœ¨å±å¹•ä¸Šæç¤ºäº†å››ä¸ªURLï¼š
```
      Local: http://localhost:3000
   External: http://10.0.2.15:3000
         UI: http://localhost:3001
UI External: http://10.0.2.15:3001
```
VMçš„3000å’Œ3001ç«¯å£å·²ç»é€šè¿‡NATæ˜ å°„åˆ°äº†windowsã€‚åœ¨windowsä¸‹ç”¨æµè§ˆå™¨æ‰“å¼€åœ°å€`http://localhost:3000`å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„å® ç‰©å•†åº—é¡µé¢ï¼š
![](http://truffleframework.com/tutorials/images/pet-shop/dapp.png) 
ï¼ˆ3001ç«¯å£åº”æ˜¯lite-serverçš„ç®¡ç†æ§åˆ¶å°ï¼‰  

2. ä¸ºäº†ä½¿ç”¨dappï¼Œç‚¹å‡»é€‰æ‹©å® ç‰©å›¾ç‰‡ä¸‹çš„**Adopt**æŒ‰é’®ã€‚  

3. ä½ ä¼šè¢«MetaMaskè‡ªåŠ¨æç¤ºæ¥æ‰¹å‡†äº¤æ˜“ã€‚ç‚¹å‡»**Submit**æŒ‰é’®æ¥æ‰¹å‡†äº¤æ˜“ã€‚
![](http://truffleframework.com/tutorials/images/pet-shop/metamask-transactionconfirm.png) 
ï¼ˆé€šè¿‡Foxfireå’ŒChromeçš„MetaMaskæ’ä»¶éƒ½è¯•äº†ï¼Œæ— æ³•è‡ªåŠ¨æç¤ºæ‰¹å‡†äº¤æ˜“ã€‚å¯èƒ½ä¸NATæœ‰å…³ï¼‰

4. è¢«æ”¶å…»å® ç‰©æ—è¾¹çš„æŒ‰é’®å˜æˆäº†â€œSucessâ€å’Œè¢«ç¦ç”¨ï¼Œè¯´æ˜è¿™ä¸ªå® ç‰©å·²ç»è¢«æ”¶å…»ã€‚  
![](http://truffleframework.com/tutorials/images/pet-shop/dapp-success.png)

5. åœ¨MetaMaskä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åˆšåˆšçš„äº¤æ˜“ï¼š
![](http://truffleframework.com/tutorials/images/pet-shop/metamask-transactionsuccess.png) 

æ‚¨è¿˜å¯ä»¥åœ¨Ganacheä¸­çœ‹åˆ°åœ¨åˆ—å‡ºçš„åŒä¸€äº¤æ˜“ã€‚

æ­å–œï¼ä½ å·²ç»è¿ˆå‡ºäº†ä¸€å¤§æ­¥ï¼Œæˆä¸ºä¸€ä¸ªæˆç†Ÿçš„dappå¼€å‘è€…ã€‚ä¸ºäº†åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‰€æœ‰å·¥å…·å¼€å§‹åˆ¶ä½œæ›´é«˜çº§çš„dappã€‚å¦‚æœæ‚¨å¸Œæœ›è®©æ‚¨çš„dappèƒ½å¤Ÿè®©å…¶ä»–äººä½¿ç”¨ï¼Œè¯·ç»§ç»­å…³æ³¨æˆ‘ä»¬å°†æ¥éƒ¨ç½²åˆ°Ropstenæµ‹è¯•ç½‘ç»œçš„æ•™ç¨‹ã€‚

### ä¸ºQUORUMæ„å»ºDAPPï¼šä¼ä¸šç§æœ‰é“¾
Quorumæ˜¯å¢åŠ äº†æ–°ç‰¹æ€§çš„ä»¥å¤ªåŠç‰ˆæœ¬ã€‚ç‰¹åˆ«æ˜¯ï¼Œ**Quorumæä¾›äº†åœ¨é€‰å®šå‚ä¸è€…ä¹‹é—´å»ºç«‹ç§æœ‰é“¾çš„èƒ½åŠ›ï¼Œæ›´é‡è¦çš„æ˜¯åœ¨ä»¥å¤ªåŠäº¤æ˜“ä¹‹ä¸Šå¢åŠ äº†äº¤æ˜“éšç§æ€§ã€‚**

äº¤æ˜“éšç§æä¾›äº†è®¸å¤šæœ‰ç”¨çš„ç”¨ä¾‹ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼ä¸šå’Œé“¶è¡Œä¸šä¸­ã€‚ä¾‹å¦‚ï¼Œå¤§å‹é“¶è¡Œå¯èƒ½å¸Œæœ›åˆ©ç”¨åŒºå—é“¾æŠ€æœ¯ï¼ˆå¦‚ä»¥å¤ªåŠï¼‰çš„ä¼˜åŠ¿ï¼Œä½†ä¸å¸Œæœ›ä»–ä»¬çš„äº¤æ˜“å‘æ‰€æœ‰äººå…¬å¼€ã€‚Quorumæä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„é¢å¤–é€‰æ‹©ã€‚

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šè¯´é²å‹ƒã€æ±¤å§†å’Œè‰¾ä¸½æ–¯éƒ½ä¸€èµ·åˆ›å»ºäº†åŒºå—é“¾ï¼Œçˆ±ä¸½ä¸æƒ³è¦å‘é€20ä¸ªTruffleCoinç»™é²å‹ƒã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªè¦æ±‚ï¼šå¥¹ä¸å¸Œæœ›æ±¤å§†ï¼ˆæˆ–è€…é²å‹ƒä»¥å¤–çš„ä»»ä½•äººï¼‰çŸ¥é“ï¼Œå› ä¸ºå¥¹å…³å¿ƒå¥¹çš„éšç§ã€‚ä½¿ç”¨Quorumï¼Œè‰¾ä¸½æ–¯å¯ä»¥è½»æ¾å‘é€ä¸€ä¸ªäº¤æ˜“ï¼Œè€Œäº¤æ˜“æ•°æ®ä»…å¥¹å’ŒBobå¯è§ã€‚

æœ¬æ•™ç¨‹ä»£è¡¨äº†Truffleå¯¹Quorumçš„å®˜æ–¹æ”¯æŒã€‚åœ¨æœ¬æ•™ç¨‹ç»“æŸæ—¶ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•å°†Truffleå’ŒQuorumä¸€èµ·ä½¿ç”¨æ¥æ„å»ºå¯ç”¨éšç§åŠŸèƒ½çš„dappsã€‚

#### éœ€æ±‚
æœ¬æ•™ç¨‹å¸Œæœ›æ‚¨äº†è§£Truffleã€ä»¥å¤ªåŠã€Quorumå’ŒSolidityçš„ä¸€äº›çŸ¥è¯†ã€‚æœ‰å…³è¿™äº›ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä»¥ä¸‹é“¾æ¥ï¼š

- [Truffleæ–‡æ¡£](http://truffleframework.com/docs/) 

- [ä»¥å¤ªåŠæ¦‚è§ˆ](https://github.com/wbwangk/wbwangk.github.io/wiki/Ethereum#toc15) 

- [Quorumæ¦‚è§ˆ](https://www.jpmorgan.com/country/US/EN/Quorum) å’Œ[æ–‡æ¡£](https://github.com/jpmorganchase/quorum/wiki) 

- [Solidityæ–‡æ¡£](https://solidity.readthedocs.io/en/develop/) 
æ‚¨å°†ä¸»è¦ä½¿ç”¨æœ¬æ•™ç¨‹çš„å‘½ä»¤è¡Œã€‚è¯·ç¡®ä¿æ‚¨å·²ç†Ÿæ‚‰æ‰“å¼€å’Œä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„å‘½ä»¤è¡Œã€‚æ­¤å¤–ï¼Œåœ¨ç»§ç»­ä¹‹å‰ï¼Œæ‚¨éœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š

- VirtualBox

- Vagrant

- Git


#### å…¥é—¨
åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨Truffleå’ŒQuorumçš„[7èŠ‚ç‚¹](https://github.com/jpmorganchase/quorum-examples/tree/master/examples/7nodes) ç¤ºä¾‹ä¸ºQuorumå¼€å‘dapps ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

- è®¾ç½®æ‚¨çš„Quorumå®¢æˆ·ç«¯

- å°†Truffleè¿æ¥åˆ° Quorum

- åœ¨Quorumä¸Šéƒ¨ç½²æ™ºèƒ½åˆçº¦

- ä½¿ç”¨Quorumçš„éšç§åŠŸèƒ½ä½¿äº¤æ˜“ä¿å¯†

- ä¸åˆçº¦äº’åŠ¨æ—¶ä¿æŒç§å¯†

æ‚¨å°†ä¼šçœ‹åˆ°ä½¿ç”¨ Truffleè¿›è¡ŒQuorumå¼€å‘å°±åƒå¼€å‘ä»¥å¤ªåŠåŒºå—é“¾ä¸€æ ·ã€‚Truffleæ”¯æŒQuorumå¼€ç®±å³ç”¨ï¼Œå¹¶ä¸”ä¸ºEthereumå…¬å…±åŒºå—é“¾æ„å»ºå¯ç”¨ä»¥å¤ªåŠçš„ä»¥å¤ªç½‘åº”ç”¨ç¨‹åºçš„ç­–ç•¥å’Œæ–¹æ³•ä¹Ÿé€‚ç”¨äºåœ¨Quorumä¸Šæ„å»ºdappsã€‚

#### è®¾ç½®æ‚¨çš„Quorumå®¢æˆ·ç«¯
Quorumå®¢æˆ·ç«¯æ˜¯ä»¥å¤ªåŠå®¢æˆ·ç«¯çš„æ›¿ä»£å“ã€‚ä½¿ç”¨Quorumå®¢æˆ·ç«¯ï¼Œæ‚¨å¯ä»¥è®¾ç½®ç§äººåŒºå—é“¾ï¼Œè¯¥åŒºå—é“¾åªå¯¹æ‚¨å’Œæ‚¨å…è®¸å‚ä¸çš„äººå‘˜å¯ç”¨ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªç”±ä¸ƒä¸ªèŠ‚ç‚¹ç»„æˆçš„Quorumé›†ç¾¤ï¼ˆæ‰€ä»¥æœ‰ä¸ƒä¸ªQuorumå®¢æˆ·ç«¯ï¼‰å·²ç»åœ¨è™šæ‹Ÿæœºå†…ä¸ºæˆ‘ä»¬è®¾ç½®å’Œé…ç½®ã€‚æ‚¨å¯ä»¥é€‰æ‹©[ç›´æ¥ä¸‹è½½](https://github.com/jpmorganchase/quorum) å¹¶ä»æºä»£ç æ„å»ºQuorum ï¼Œä½†å¯¹äºæ­¤ç¤ºä¾‹ï¼Œä½¿ç”¨é¢„é…ç½®çš„ç¾¤é›†è¦å®¹æ˜“å¾—å¤šã€‚

1. è¦å»ºç«‹ç¾¤é›†ï¼Œè¯·æ‰“å¼€ç»ˆç«¯å¹¶å¯¼èˆªåˆ°æ‚¨æƒ³è¦å®‰è£…çš„ç›®å½•ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©äº†ç›®å½•åä¸º`workspace`ï¼š
```
mkdir workspace && cd workspace
```

2. ä¸‹è½½Quorumç¤ºä¾‹åº“ã€å¯åŠ¨è™šæ‹Ÿæœºã€ç™»å½•è™šæ‹Ÿæœºï¼š
```
git clone https://github.com/jpmorganchase/quorum-examples
cd quorum-examples && vagrant up
vagrant ssh
```

3. è¿›å…¥ç¤ºä¾‹ç›®å½•ã€å¯åŠ¨Quorumå®¢æˆ·ç«¯ï¼š
```
$ cd quorum-examples/7nodes/
$ ./raft-init.sh
$ ./raft-start.sh
```
ç¬¬ä¸€ä¸ªå‘½ä»¤åˆ›å»ºäº†7ä¸ªQuorumèŠ‚ç‚¹ï¼Œç”¨äºæ¨¡æ‹Ÿä¸€ä¸ªå®é™…çš„Quoruméƒ¨ç½²ã€‚ç¬¬è€Œä¸ªå‘½ä»¤å¯åŠ¨è¿™7ä¸ªèŠ‚ç‚¹ã€‚ç¬¬ä¸€ä¸ªå‘½ä»¤åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œä½ å¯ä»¥æ‰§è¡Œç¬¬äºŒä¸ªå‘½ä»¤å¤šæ¬¡æ¥é‡å¯è™šæ‹Ÿæœºã€‚

æˆåŠŸï¼æˆ‘ä»¬ç°åœ¨å»ºç«‹äº†7ä¸ªQuorumèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬åœ¨ç§æœ‰ç½‘ç»œä¸­ä»£è¡¨7ä¸ªä¸åŒçš„è§’è‰²ã€‚


#### è¿æ¥Truffleåˆ°Quorum
ä¸ºäº†å»ºç«‹Truffleï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•åˆçº¦æˆ–ä»£ç çš„ç©ºTruffleé¡¹ç›®ã€‚

1. æ—§çš„å‘½ä»¤è¡Œçª—å£è¿è¡Œç€Quorumç¤ºä¾‹ï¼Œä¸ºäº†ä¸å½±å“å®ƒè¿è¡Œæˆ‘ä»¬å¯åŠ¨ç¬¬äºŒä¸ªç»ˆç«¯çª—å£ã€‚

2. åœ¨æ–°çš„ç»ˆç«¯ä¸­ï¼Œå¯¼èˆªåˆ°å·¥ä½œåŒºå¹¶ä¸ºTruffleé¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•ã€‚åˆå§‹åŒ–ç©ºçš„Truffleé¡¹ç›®ï¼š
```
cd workspace && mkdir myproject
cd myproject && truffle init
```

3. åœ¨è½¬åˆ°ç¼–ç å‰ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®Truffleæ¥æŒ‡å‘æˆ‘ä»¬æ­£åœ¨è¿è¡Œçš„Quorumå®¢æˆ·ç«¯ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ç¼–è¾‘`truffle.js`ä¸­çš„`development`ç½‘ç»œé…ç½®ï¼Œä»¥æŒ‡å‘7èŠ‚ç‚¹ç¤ºä¾‹ä¸­å¯ç”¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š
```javascript
// File: `truffle.js` (edited for 7nodes example)
module.exports = {
  networks: {
    development: {
      host: "127.0.0.1",
      port: 22000, // was 8545
      network_id: "*", // Match any network id
      gasPrice: 0,
      gas: 4500000
    }
  }
};
```
è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ›´æ”¹äº†Truffleé€šå¸¸è¿æ¥åˆ°çš„ç«¯å£ï¼ˆæˆ‘ä»¬å°†å…¶æ›´æ”¹ä¸º22000ï¼‰ã€‚ç”±äºVirtualBoxå’ŒVagrantçš„é­”åŠ›ï¼Œè™šæ‹Ÿæœºå†…è¿è¡Œçš„èŠ‚ç‚¹é€šè¿‡æœ¬åœ°ç«¯å£æä¾›ç»™æˆ‘ä»¬ï¼Œæ‰€ä»¥é€šè¿‡è¿æ¥127.0.0.1å’Œ22000å°†å·¥ä½œå¾—å¾ˆå¥½ã€‚

*æ³¨æ„ï¼šä¸ƒä¸ªQuorumå®¢æˆ·ç«¯ç›‘å¬çš„ç«¯å£æ˜¯ä»22000ï¼ˆèŠ‚ç‚¹1ï¼‰é€šè¿‡22006ï¼ˆèŠ‚ç‚¹7ï¼‰ã€‚*

ç°åœ¨å·²ç»å»ºç«‹äº†Truffleï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç¼–ç äº†ã€‚

#### åœ¨Quorumä¸Šéƒ¨ç½²æ™ºèƒ½åˆçº¦
ç”±äºæˆ‘ä»¬æœ‰[å……è¶³çš„æ–‡æ¡£](http://truffleframework.com/docs) ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šèŠ±å¤ªå¤šæ—¶é—´åœ¨Truffleä¸Šç¼–å†™æˆ–éƒ¨ç½²åˆçº¦ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è¦å±•ç¤ºå¦‚ä½•å°†éƒ¨ç½²åˆçº¦åˆ°Quorumã€‚

1. é¦–å…ˆï¼Œå°†ä»¥ä¸‹åˆçº¦å¤åˆ¶åˆ°ç§°ä¸º`SimpleStorage.sol`çš„æ–°æ–‡ä»¶ä¸­ã€‚å°†å…¶æ”¾ç½®åœ¨æ‚¨çš„`contracts/`ç›®å½•ä¸­ï¼š
```solidity
// File: `./contracts/SimpleStorage.sol`

pragma solidity ^0.4.17;

contract SimpleStorage {
  uint public storedData;

  function SimpleStorage(uint initVal) public {
    storedData = initVal;
  }

  function set(uint x) public {
    storedData = x;
  }

  function get() constant public returns (uint retVal) {
    return storedData;
  }
}
```
2. ç¡®ä¿åœ¨é¡¹ç›®ç›®å½•ä¸­ç”¨`truffle compile`å‘½ä»¤ç¼–è¯‘åˆçº¦ã€‚
```
truffle compile
```
3. æ¥ä¸‹æ¥ï¼Œåœ¨æ‚¨çš„`migrations/`ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„è¿ç§»`2_deploy_simplestorage.js`ã€‚è¯·æ³¨æ„ï¼Œæ­¤è¿ç§»ä¸æ‚¨ä¸ºTruffleåˆ›å»ºçš„ä»»ä½•å…¶ä»–è¿ç§»ä¸€æ ·ï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦åŒºåˆ«ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä½ èƒ½å¦æŠ“ä½å®ƒã€‚
```javascript
// File: `./migrations/2_deploy_simplestorage.js`

var SimpleStorage = artifacts.require("SimpleStorage");

module.exports = function(deployer) {
  // Pass 42 to the contract as the first constructor parameter
  deployer.deploy(SimpleStorage, 42, {privateFor: ["ROAZBWtSacxXQrOe3FGAqJDyJjFePR5ce4TSIzmJ0Bc="]})
};
```
å¦‚æœä½ çŒœåˆ°å·®å¼‚æ˜¯`privateFor`ï¼Œé‚£ä¹ˆä½ æŠ“ä½å®ƒäº†ï¼`privateFor`æ˜¯æ·»åŠ åˆ°Quorumä¸­çš„é¢å¤–äº‹åŠ¡å‚æ•°ï¼Œå®ƒæŒ‡å®šæ‚¨æ­£åœ¨è¿›è¡Œçš„äº¤æ˜“ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºåˆçº¦éƒ¨ç½²ï¼‰å¯¹äºç”±ç»™å®šå…¬é’¥æ ‡è¯†çš„ç‰¹å®šå¸æˆ·æ˜¯ç§æœ‰çš„ã€‚å¯¹äºè¿™ä¸ªäº¤æ˜“ï¼Œæˆ‘ä»¬é€‰æ‹©çš„å…¬é’¥ä»£è¡¨èŠ‚ç‚¹7ã€‚ç”±äºæˆ‘ä»¬ä»¥å‰å°†Truffleé…ç½®ä¸ºè¿æ¥åˆ°èŠ‚ç‚¹1ï¼Œå› æ­¤æ­¤äº¤æ˜“å°†ä»èŠ‚ç‚¹1éƒ¨ç½²åˆçº¦ï¼Œä½¿äº¤æ˜“åœ¨èŠ‚ç‚¹1å’ŒèŠ‚ç‚¹7ä¹‹é—´ä¿å¯†ã€‚

4. ç°åœ¨æ˜¯éƒ¨ç½²åˆçº¦çš„æ—¶å€™äº†ã€‚è¿è¡Œ`truffle migrate`å‘½ä»¤å¹¶æ³¨æ„æ‚¨çš„åˆçº¦å·²æˆåŠŸéƒ¨ç½²ï¼š
```
truffle migrate
```
ç°åœ¨åˆçº¦å·²ç»éƒ¨ç½²äº†ï¼Œå®ƒå·²ç»å¼€å§‹å·¥ä½œäº†ã€‚

#### ä½¿ç”¨Quorumçš„éšç§åŠŸèƒ½ä½¿äº¤æ˜“ä¿å¯†
æˆ‘ä»¬æœ€åˆå°†Truffleé…ç½®ä¸ºå°†å¼€å‘ç¯å¢ƒæŒ‡å‘ç¤ºä¾‹æä¾›çš„ä¸ƒä¸ªèŠ‚ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ªã€‚æ‚¨å¯ä»¥å°†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è§†ä¸ºâ€œæˆ‘ä»¬â€ï¼Œå°±å¥½åƒæˆ‘ä»¬æ­£åœ¨ä¸ºå¤šä¸ªå…¶ä»–æ–¹ä½¿ç”¨çš„ä¸“ç”¨ç½‘ç»œå¼€å‘dappä¸€æ ·ã€‚ç”±äº7èŠ‚ç‚¹ç¤ºä¾‹ä¸ºæˆ‘ä»¬æä¾›äº†7ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰Truffleå…¶ä»–èŠ‚ç‚¹ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥â€œæˆä¸ºâ€å…¶ä»–èŠ‚ç‚¹ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬éƒ¨ç½²çš„åˆçº¦æ˜¯ç§æœ‰çš„ã€‚

1. è¦æ·»åŠ æ–°çš„ç½‘ç»œé…ç½®ï¼Œè¯·å†æ¬¡ç¼–è¾‘`truffle.js`æ–‡ä»¶å¹¶æ·»åŠ å…¶ä»–ç½‘ç»œé…ç½®ï¼Œå¹¶é€‰æ‹©æœ€èƒ½æè¿°æ‚¨æ‰€æ·»åŠ çš„ç½‘ç»œè¿æ¥çš„ç½‘ç»œåç§°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªè¿æ¥åˆ°èŠ‚ç‚¹4ï¼ˆnodefourï¼‰å’ŒèŠ‚ç‚¹7ï¼ˆnodesevenï¼‰ï¼š
```javascript
// File: `truffle.js`
module.exports = {
  networks: {
    development: {
      host: "127.0.0.1",
      port: 22000, // was 8545
      network_id: "*", // Match any network id
      gasPrice: 0,
      gas: 4500000
    },
    nodefour:  {
      host: "127.0.0.1",
      port: 22003,
      network_id: "*", // Match any network id
      gasPrice: 0,
      gas: 4500000
    },
    nodeseven:  {
      host: "127.0.0.1",
      port: 22006,
      network_id: "*", // Match any network id
      gasPrice: 0,
      gas: 4500000
    }
  }
};
```
å’Œä»¥å‰ä¸€æ ·ï¼ŒVirtualBoxå’ŒVagranté€šè¿‡æœ¬åœ°ç«¯å£è®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›èŠ‚ç‚¹ï¼Œæ‰€ä»¥`development`é™¤äº†æŒ‡å®šä¸åŒçš„ç«¯å£ä¹‹å¤–ï¼Œè¿™äº›é…ç½®çœ‹èµ·æ¥ä¸æˆ‘ä»¬çš„é…ç½®ç›¸åŒã€‚

2. ç°åœ¨æˆ‘ä»¬çš„é…ç½®å·²ç»å»ºç«‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Truffleæ§åˆ¶å°ä¸æˆ‘ä»¬å·²éƒ¨ç½²çš„åˆçº¦è¿›è¡Œäº¤äº’ã€‚é¦–å…ˆé€šè¿‡é…ç½®`development`é…ç½®ï¼Œè®©æˆ‘ä»¬æˆä¸ºâ€œæˆ‘ä»¬â€ï¼ˆèŠ‚ç‚¹1ï¼‰ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯å¯åŠ¨Truffleæ§åˆ¶å°ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬ç›´æ¥ä¸å·²éƒ¨ç½²åˆçº¦è¿›è¡Œäº¤äº’ã€‚
```
truffle console
truffle(development)>
```
3. åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è·å¾—å·²éƒ¨ç½²`SimpleStorage`åˆçº¦çš„å®ä¾‹ï¼Œç„¶åè·å–åœ¨éƒ¨ç½²æ—¶æŒ‡å®šçš„æ•´æ•°å€¼ã€‚è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
```
truffle(development)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '42'] s: 1, e: 1, c: [ 42 ] }
```
è¯·æ³¨æ„ï¼Œ Truffleçš„åˆçº¦æŠ½è±¡ä½¿ç”¨Promiseä¸ä»¥å¤ªåŠè¿›è¡Œäº’åŠ¨ã€‚è¿™åœ¨æ§åˆ¶å°ä¸Šå¯èƒ½æœ‰ç‚¹éº»çƒ¦ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸€äº›é¢å¤–çš„æŒ‰é”®æ¥å®Œæˆä»»åŠ¡ï¼Œä½†åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå®ƒä½¿æ§åˆ¶æµç¨‹æ›´é¡ºç•…ã€‚å¦å¤–ï¼Œçœ‹çœ‹æˆ‘ä»¬æ”¶åˆ°çš„è¾“å‡ºï¼šæˆ‘ä»¬å–å›äº†`42`ï¼Œä½†ä½œä¸ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™æ˜¯å› ä¸ºä»¥å¤ªåŠå¯ä»¥è¡¨ç¤ºæ¯”åŸç”ŸJavaScriptæ›´å¤§çš„æ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŠ½è±¡æ¥ä¸å®ƒä»¬è¿›è¡Œäº¤äº’ã€‚

4. ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä½œä¸ºèŠ‚ç‚¹å››è®¿é—®SimpleStorageåˆçº¦ã€‚ä¸ºæ­¤ï¼Œè¯·é€€å‡ºæ§åˆ¶å°ï¼ˆä½¿ç”¨`Ctrl + C`/ `Command + C`ï¼‰ï¼Œç„¶åå†æ¬¡å¯åŠ¨æ§åˆ¶å°ï¼Œä½†æ˜¯è¿™æ¬¡æŒ‡å®šè¿æ¥åˆ°èŠ‚ç‚¹4è€Œä¸æ˜¯èŠ‚ç‚¹1ï¼š
```
truffle console --network nodefour
truffle(nodefour)>
```
5. è¿è¡Œä¸ä¸Šé¢ç›¸åŒçš„å‘½ä»¤æ¥è·å–SimpleStorageåˆçº¦ä¸­çš„æ•´æ•°å€¼ï¼š
```
truffle(nodefour)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '0'] s: 1, e: 0, c: [ 0 ] }
```
ä½ ä¼šæ³¨æ„åˆ°è¿™æ¬¡å–å›çš„æ˜¯`0`ã€‚è¿™æ˜¯å› ä¸ºç”±èŠ‚ç‚¹4ä»£è¡¨çš„è´¦æˆ·ä¸æ˜¯è¿™ä¸ªåˆçº¦çš„å‚ä¸è€…ã€‚

6. æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•èŠ‚ç‚¹7ï¼Œå®ƒæ˜¯è¿™ä¸ªåˆçº¦çš„å‚ä¸è€…ã€‚å†æ¬¡é€€å‡ºå¹¶é‡æ–°å¯åŠ¨æ§åˆ¶å°ï¼š
```
truffle console --network nodeseven
truffle(nodeseven)>
```

7. è¿è¡Œä¸ä¸Šé¢ç›¸åŒçš„å‘½ä»¤ä»¥è·å–SimpleStorageåˆçº¦ä¸­çš„æ•´æ•°å€¼ï¼š
```
truffle(nodeseven)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '42'] s: 1, e: 1, c: [ 42 ] }
```
æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¾—åˆ°äº†`42`ï¼è¿™è¡¨æ˜æˆ‘ä»¬éƒ¨ç½²çš„åˆçº¦å¯ä»¥ä»…å¯¹æŒ‡å®šçš„å‚ä¸æ–¹å¯è§ã€‚

#### ç§ä¸‹ä¸åˆçº¦äº’åŠ¨
åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•åœ¨è¿ç§»ä¸­éƒ¨ç½²ç§æœ‰çš„åˆçº¦ã€‚åœ¨Quorumä¸Šæ„å»ºdappæ—¶ï¼Œäº†è§£å¦‚ä½•ä½¿æ‰€æœ‰äº¤æ˜“ç§æœ‰åŒ–ä¹Ÿå¾ˆæœ‰å¸®åŠ©ã€‚

åœ¨JavaScriptä¸­ä½¿ç”¨åˆçº¦çš„åœ°æ–¹ï¼ŒTruffleä½¿ç”¨[truffle-contract](https://github.com/trufflesuite/truffle-contract) æŠ½è±¡ã€‚ä¾‹å¦‚ï¼Œå½“æ‚¨åœ¨ä¸Šé¢çš„æ§åˆ¶å°ä¸­ä¸`SimpleStorage`è¿›è¡Œäº¤äº’æ—¶ï¼Œæ‚¨æ­£åœ¨ä½¿ç”¨`truffle-contract`åˆçº¦æŠ½è±¡ã€‚è¿™äº›æŠ½è±¡ä¹Ÿç”¨äºæ‚¨çš„è¿ç§»ã€åŸºäºJavaScriptçš„å•å…ƒæµ‹è¯•ä»¥åŠä½¿ç”¨Truffleæ‰§è¡Œå¤–éƒ¨è„šæœ¬ã€‚

Truffleçš„åˆçº¦æŠ½è±¡å…è®¸æ‚¨é’ˆå¯¹åˆçº¦ä¸­å¯ç”¨çš„ä»»ä½•å‡½æ•°åˆ›å»ºä¸€ä¸ªäº¤æ˜“ã€‚å®ƒé€šè¿‡è¯„ä¼°åˆçº¦çš„å‡½æ•°å¹¶å°†å®ƒä»¬æä¾›ç»™JavaScriptæ¥å®ç°ã€‚è¦çœ‹åˆ°è¿™äº›äº¤æ˜“æ­£åœ¨è¿›è¡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Truffleçš„ä¸€é¡¹é«˜çº§åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„Truffleç¯å¢ƒä¸­æ‰§è¡Œå¤–éƒ¨è„šæœ¬ã€‚

1. åˆ›å»ºä¸€ä¸ªå«`sampletx.jsçš„æ–‡ä»¶å¹¶å°†å…¶ä¿å­˜åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ï¼ˆä¸truffle.jsæ–‡ä»¶ç›¸åŒçš„ç›®å½•ï¼‰ã€‚ç„¶åç”¨ä¸‹é¢çš„ä»£ç å¡«å……å®ƒï¼š
```javascript
var SimpleStorage = artifacts.require("SimpleStorage");

module.exports = function(done) {
  console.log("Getting deployed version of SimpleStorage...")
  SimpleStorage.deployed().then(function(instance) {
    console.log("Setting value to 65...");
    return instance.set(65, {privateFor: ["ROAZBWtSacxXQrOe3FGAqJDyJjFePR5ce4TSIzmJ0Bc="]});
  }).then(function(result) {
    console.log("Transaction:", result.tx);
    console.log("Finished!");
    done();
  }).catch(function(e) {
    console.log(e);
    done();
  });
};
```
è¿™æ®µä»£ç åšäº†ä¸¤ä»¶äº‹ï¼šé¦–å…ˆï¼Œå®ƒè¦æ±‚Truffleè·å¾—SimpleStorageåˆçº¦çš„åˆçº¦æŠ½è±¡ã€‚ç„¶åï¼Œå®ƒæ‰¾åˆ°å·²éƒ¨ç½²çš„åˆçº¦ï¼Œå¹¶ä½¿ç”¨åˆçº¦çš„`set()`å‡½æ•°å°†SimpleStorageç®¡ç†çš„å€¼è®¾ç½®ä¸º`65`ã€‚ä¸æˆ‘ä»¬å…ˆå‰å†™çš„è¿ç§»ä¸€æ ·ï¼Œå¯ä»¥åœ¨äº¤æ˜“ç»“æŸæ—¶å°†å‚æ•°`privateFor`æ·»åŠ åˆ°å¯¹è±¡ä¸­ï¼Œä»¥å‘Šè¯‰Quorumè¯¥äº¤æ˜“åœ¨å‘èµ·äººå’Œç»™å®šå…¬é’¥ä»£è¡¨çš„è´¦æˆ·ä¹‹é—´æ˜¯ç§å¯†çš„ã€‚

2. ä½¿ç”¨`truffle exec`è¿è¡Œæ­¤ä»£ç ï¼š
```
truffle exec sampletx.js
```
ä½ çš„è¾“å‡ºåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆä½ çš„äº¤æ˜“IDå°†ä¼šä¸åŒï¼‰ï¼š
```
Using network 'development'.

Getting deployed version of SimpleStorage...
Setting value to 65...
Transaction: 0x0a7a661e657f5a706b0c39b4f197038ef0c3e77abc9970a623327c6f48ca9aff
Finished!
```
æˆ‘ä»¬ç°åœ¨å¯ä»¥åƒä»¥å‰ä¸€æ ·ä½¿ç”¨Truffleæ§åˆ¶å°æ¥æ£€æŸ¥æ­¤äº¤æ˜“çš„ç»“æœã€‚è®©æˆ‘ä»¬ä½œä¸ºèŠ‚ç‚¹1çœ‹çœ‹è¿™ä¸ªå€¼ï¼š
```
truffle console
truffle(development)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '65'] s: 1, e: 1, c: [ 65 ] }
```
æˆ‘ä»¬å–åˆ°äº†`65`ï¼ç°åœ¨è®©æˆ‘ä»¬ä½œä¸ºèŠ‚ç‚¹4æ¥è¿è¡Œï¼ˆä¸æ˜¯äº¤æ˜“çš„å‚ä¸è€…ï¼‰ï¼š
```
truffle console --network nodefour
truffle(nodefour)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '0'] s: 1, e: 0, c: [ 0 ] }
```
å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†`0`ã€‚ç°åœ¨è®©æˆ‘ä»¬å°è¯•èŠ‚ç‚¹7ï¼š
```
truffle console --network nodeseven
truffle(nodeseven)> SimpleStorage.deployed().then(function(instance) { return instance.get(); })
{ [String: '65'] s: 1, e: 1, c: [ 65 ] }
```
æ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·ï¼Œæˆ‘ä»¬åˆå¾—åˆ°äº†`65`ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨Truffleçš„åˆçº¦æŠ½è±¡ä¸Quorumè¿›è¡Œç§ä¸‹äº¤æ˜“ã€‚

#### è¿™æ˜¯æ‰€æœ‰Truffleéƒ½å¯ä»¥åšåˆ°çš„å—ï¼Ÿ
ç»å¯¹ä¸æ˜¯ï¼æˆ‘ä»¬ä»Šå¤©å‘æ‚¨å±•ç¤ºçš„æ˜¯è®©Quorumæ„å»ºdappsä¸åŒäºä¸ºå…±æœ‰ä»¥å¤ªåŠæ„å»ºdappsçš„ä¸€åˆ‡ã€‚è€Œä¸”ä½ ä¼šå‘ç°å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼šå”¯ä¸€çš„åŒºåˆ«æ˜¯ä¸ºä½ å¸Œæœ›ä¿å¯†çš„éƒ¨ç½²å’Œäº¤æ˜“æ·»åŠ `privateFor`å‚æ•°ã€‚å…¶ä½™çš„éƒ½æ˜¯ä¸€æ ·çš„ï¼

äº‹å®ä¸Šï¼Œç°åœ¨æ‚¨å·²ç»æŒæ¡äº†åŸºæœ¬çŸ¥è¯†ï¼Œæ‚¨å¯ä»¥æ¢ç´¢æˆ‘ä»¬æ‰€æœ‰å…¶ä»–ç”¨Truffleæ„å»ºdappçš„[èµ„æº](http://truffleframework.com/docs)ï¼ŒåŒ…æ‹¬[æ•™ç¨‹](http://truffleframework.com/tutorials) ã€[ç¼–å†™é«˜çº§éƒ¨ç½²è„šæœ¬](http://truffleframework.com/docs/getting_started/migrations) ã€[å•å…ƒæµ‹è¯•](http://truffleframework.com/docs/getting_started/javascript-tests) ï¼ˆ[è¿˜åŒ…æ‹¬Solidity](http://truffleframework.com/docs/getting_started/solidity-tests) ï¼‰ç­‰ç­‰ã€‚

é€šè¿‡ä½¿ç”¨Truffleè¿›è¡Œæ„å»ºï¼Œæ‚¨ç°åœ¨ä¸ä»…å¯ä»¥è®¿é—®æœ€ä½³å¼€å‘å·¥å…·å’ŒæŠ€æœ¯ï¼ˆå¦‚Quorumï¼‰ï¼Œè¿˜å¯ä»¥è®¿é—®æœ€å¤§çš„ä»¥å¤ªåŠå¼€å‘è€…ç¤¾åŒºã€‚ä¸è¦çŠ¹è±«ï¼Œ[ç»™æˆ‘ä»¬ä¸€æ¡çº¿](https://gitter.im/ConsenSys/truffle) æˆ–ä»[ç¤¾åŒº](https://gitter.im/ConsenSys/truffle) è·å¾—å¸®åŠ©ã€‚æ€»æœ‰äººå¯ä»¥å›ç­”æ‚¨çš„ä»»ä½•é—®é¢˜ã€‚

å¹²æ¯ï¼Œå¿«ä¹çš„ç¼–ç ï¼

## å‚è€ƒ
[Ethereum Homestead Documentation](http://www.ethdocs.org/en/latest/index.html)ï¼ˆä»¥å¤ªåŠhomesteadç‰ˆæ–‡æ¡£ï¼Œhomesteadå³å½“å‰æ­£åœ¨ç”¨çš„ç‰ˆæœ¬ï¼‰